¯i
+/workspace/Controllers/CoursesController.cs
	namespace 	
ContosoUniversity
 
. 
Controllers '
{ 
public 

class 
CoursesController "
:# $

Controller% /
{ 
private 
readonly 
SchoolContext &
_context' /
;/ 0
public 
CoursesController  
(  !
SchoolContext! .
context/ 6
)6 7
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
var 
courses 
= 
_context "
." #
Courses# *
. 
Include 
( 
c 
=> 
c 
.  

Department  *
)* +
. 
AsNoTracking 
( 
) 
;  
return 
View 
( 
await 
courses %
.% &
ToListAsync& 1
(1 2
)2 3
)3 4
;4 5
} 	
public   
async   
Task   
<   
IActionResult   '
>  ' (
Details  ) 0
(  0 1
int  1 4
?  4 5
id  6 8
)  8 9
{!! 	
if"" 
("" 
id"" 
=="" 
null"" 
)"" 
{## 
return$$ 
NotFound$$ 
($$  
)$$  !
;$$! "
}%% 
var'' 
course'' 
='' 
await'' 
_context'' '
.''' (
Courses''( /
.(( 
Include(( 
((( 
c(( 
=>(( 
c(( 
.((  

Department((  *
)((* +
.)) 
AsNoTracking)) 
()) 
))) 
.** 
FirstOrDefaultAsync** $
(**$ %
m**% &
=>**' )
m*** +
.**+ ,
CourseID**, 4
==**5 7
id**8 :
)**: ;
;**; <
if++ 
(++ 
course++ 
==++ 
null++ 
)++ 
{,, 
return-- 
NotFound-- 
(--  
)--  !
;--! "
}.. 
return00 
View00 
(00 
course00 
)00 
;00  
}11 	
public44 
IActionResult44 
Create44 #
(44# $
)44$ %
{55 	+
PopulateDepartmentsDropDownList66 +
(66+ ,
)66, -
;66- .
return77 
View77 
(77 
)77 
;77 
}88 	
[== 	
HttpPost==	 
]== 
[>> 	$
ValidateAntiForgeryToken>>	 !
]>>! "
public?? 
async?? 
Task?? 
<?? 
IActionResult?? '
>??' (
Create??) /
(??/ 0
[??0 1
Bind??1 5
(??5 6
$str??6 [
)??[ \
]??\ ]
Course??^ d
course??e k
)??k l
{@@ 	
ifAA 
(AA 

ModelStateAA 
.AA 
IsValidAA "
)AA" #
{BB 
_contextCC 
.CC 
AddCC 
(CC 
courseCC #
)CC# $
;CC$ %
awaitDD 
_contextDD 
.DD 
SaveChangesAsyncDD /
(DD/ 0
)DD0 1
;DD1 2
returnEE 
RedirectToActionEE '
(EE' (
nameofEE( .
(EE. /
IndexEE/ 4
)EE4 5
)EE5 6
;EE6 7
}FF +
PopulateDepartmentsDropDownListGG +
(GG+ ,
courseGG, 2
.GG2 3
DepartmentIDGG3 ?
)GG? @
;GG@ A
returnHH 
ViewHH 
(HH 
courseHH 
)HH 
;HH  
}II 	
publicLL 
asyncLL 
TaskLL 
<LL 
IActionResultLL '
>LL' (
EditLL) -
(LL- .
intLL. 1
?LL1 2
idLL3 5
)LL5 6
{MM 	
ifNN 
(NN 
idNN 
==NN 
nullNN 
)NN 
{OO 
returnPP 
NotFoundPP 
(PP  
)PP  !
;PP! "
}QQ 
varSS 
courseSS 
=SS 
awaitSS 
_contextSS '
.SS' (
CoursesSS( /
.TT 
AsNoTrackingTT 
(TT 
)TT 
.UU 
FirstOrDefaultAsyncUU $
(UU$ %
mUU% &
=>UU' )
mUU* +
.UU+ ,
CourseIDUU, 4
==UU5 7
idUU8 :
)UU: ;
;UU; <
ifVV 
(VV 
courseVV 
==VV 
nullVV 
)VV 
{WW 
returnXX 
NotFoundXX 
(XX  
)XX  !
;XX! "
}YY +
PopulateDepartmentsDropDownListZZ +
(ZZ+ ,
courseZZ, 2
.ZZ2 3
DepartmentIDZZ3 ?
)ZZ? @
;ZZ@ A
return[[ 
View[[ 
([[ 
course[[ 
)[[ 
;[[  
}\\ 	
[aa 	
HttpPostaa	 
,aa 

ActionNameaa 
(aa 
$straa $
)aa$ %
]aa% &
[bb 	$
ValidateAntiForgeryTokenbb	 !
]bb! "
publiccc 
asynccc 
Taskcc 
<cc 
IActionResultcc '
>cc' (
EditPostcc) 1
(cc1 2
intcc2 5
?cc5 6
idcc7 9
)cc9 :
{dd 	
ifee 
(ee 
idee 
==ee 
nullee 
)ee 
{ff 
returngg 
NotFoundgg 
(gg  
)gg  !
;gg! "
}hh 
varjj 
courseToUpdatejj 
=jj  
awaitjj! &
_contextjj' /
.jj/ 0
Coursesjj0 7
.kk 
FirstOrDefaultAsynckk $
(kk$ %
ckk% &
=>kk' )
ckk* +
.kk+ ,
CourseIDkk, 4
==kk5 7
idkk8 :
)kk: ;
;kk; <
ifmm 
(mm 
awaitmm 
TryUpdateModelAsyncmm )
<mm) *
Coursemm* 0
>mm0 1
(mm1 2
courseToUpdatemm2 @
,mm@ A
$strnn 
,nn 
coo 
=>oo 
coo 
.oo 
Creditsoo 
,oo 
coo  !
=>oo" $
coo% &
.oo& '
DepartmentIDoo' 3
,oo3 4
coo5 6
=>oo7 9
coo: ;
.oo; <
Titleoo< A
)ooA B
)ooB C
{pp 
tryqq 
{rr 
awaitss 
_contextss "
.ss" #
SaveChangesAsyncss# 3
(ss3 4
)ss4 5
;ss5 6
returntt 
RedirectToActiontt +
(tt+ ,
nameoftt, 2
(tt2 3
Indextt3 8
)tt8 9
)tt9 :
;tt: ;
}uu 
catchvv 
(vv 
DbUpdateExceptionvv (
)vv1 2
{ww 

ModelStateyy 
.yy 
AddModelErroryy ,
(yy, -
$stryy- /
,yy/ 0
$stryy1 K
+yyL M
$strzz B
+zzC D
$str{{ 8
){{8 9
;{{9 :
}|| 
}}} +
PopulateDepartmentsDropDownList~~ +
(~~+ ,
courseToUpdate~~, :
.~~: ;
DepartmentID~~; G
)~~G H
;~~H I
return 
View 
( 
courseToUpdate &
)& '
;' (
}
ÄÄ 	
private
ÇÇ 
void
ÇÇ -
PopulateDepartmentsDropDownList
ÇÇ 4
(
ÇÇ4 5
object
ÇÇ5 ; 
selectedDepartment
ÇÇ< N
=
ÇÇO P
null
ÇÇQ U
)
ÇÇU V
{
ÉÉ 	
var
ÑÑ 
departmentsQuery
ÑÑ  
=
ÑÑ! "
from
ÑÑ# '
d
ÑÑ( )
in
ÑÑ* ,
_context
ÑÑ- 5
.
ÑÑ5 6
Departments
ÑÑ6 A
orderby
ÖÖ# *
d
ÖÖ+ ,
.
ÖÖ, -
Name
ÖÖ- 1
select
ÜÜ# )
d
ÜÜ* +
;
ÜÜ+ ,
ViewBag
áá 
.
áá 
DepartmentID
áá  
=
áá! "
new
áá# &

SelectList
áá' 1
(
áá1 2
departmentsQuery
áá2 B
.
ááB C
AsNoTracking
ááC O
(
ááO P
)
ááP Q
,
ááQ R
$str
ááS a
,
ááa b
$str
áác i
,
áái j 
selectedDepartment
áák }
)
áá} ~
;
áá~ 
}
àà 	
public
ãã 
async
ãã 
Task
ãã 
<
ãã 
IActionResult
ãã '
>
ãã' (
Delete
ãã) /
(
ãã/ 0
int
ãã0 3
?
ãã3 4
id
ãã5 7
)
ãã7 8
{
åå 	
if
çç 
(
çç 
id
çç 
==
çç 
null
çç 
)
çç 
{
éé 
return
èè 
NotFound
èè 
(
èè  
)
èè  !
;
èè! "
}
êê 
var
íí 
course
íí 
=
íí 
await
íí 
_context
íí '
.
íí' (
Courses
íí( /
.
ìì 
Include
ìì 
(
ìì 
c
ìì 
=>
ìì 
c
ìì 
.
ìì  

Department
ìì  *
)
ìì* +
.
îî 
AsNoTracking
îî 
(
îî 
)
îî 
.
ïï !
FirstOrDefaultAsync
ïï $
(
ïï$ %
m
ïï% &
=>
ïï' )
m
ïï* +
.
ïï+ ,
CourseID
ïï, 4
==
ïï5 7
id
ïï8 :
)
ïï: ;
;
ïï; <
if
ññ 
(
ññ 
course
ññ 
==
ññ 
null
ññ 
)
ññ 
{
óó 
return
òò 
NotFound
òò 
(
òò  
)
òò  !
;
òò! "
}
ôô 
return
õõ 
View
õõ 
(
õõ 
course
õõ 
)
õõ 
;
õõ  
}
úú 	
[
üü 	
HttpPost
üü	 
,
üü 

ActionName
üü 
(
üü 
$str
üü &
)
üü& '
]
üü' (
[
†† 	&
ValidateAntiForgeryToken
††	 !
]
††! "
public
°° 
async
°° 
Task
°° 
<
°° 
IActionResult
°° '
>
°°' (
DeleteConfirmed
°°) 8
(
°°8 9
int
°°9 <
id
°°= ?
)
°°? @
{
¢¢ 	
var
££ 
course
££ 
=
££ 
await
££ 
_context
££ '
.
££' (
Courses
££( /
.
££/ 0
	FindAsync
££0 9
(
££9 :
id
££: <
)
££< =
;
££= >
_context
§§ 
.
§§ 
Courses
§§ 
.
§§ 
Remove
§§ #
(
§§# $
course
§§$ *
)
§§* +
;
§§+ ,
await
•• 
_context
•• 
.
•• 
SaveChangesAsync
•• +
(
••+ ,
)
••, -
;
••- .
return
¶¶ 
RedirectToAction
¶¶ #
(
¶¶# $
nameof
¶¶$ *
(
¶¶* +
Index
¶¶+ 0
)
¶¶0 1
)
¶¶1 2
;
¶¶2 3
}
ßß 	
public
©© 
IActionResult
©© !
UpdateCourseCredits
©© 0
(
©©0 1
)
©©1 2
{
™™ 	
return
´´ 
View
´´ 
(
´´ 
)
´´ 
;
´´ 
}
¨¨ 	
[
ÆÆ 	
HttpPost
ÆÆ	 
]
ÆÆ 
public
ØØ 
async
ØØ 
Task
ØØ 
<
ØØ 
IActionResult
ØØ '
>
ØØ' (!
UpdateCourseCredits
ØØ) <
(
ØØ< =
int
ØØ= @
?
ØØ@ A

multiplier
ØØB L
)
ØØL M
{
∞∞ 	
if
±± 
(
±± 

multiplier
±± 
!=
±± 
null
±± "
)
±±" #
{
≤≤ 
ViewData
≥≥ 
[
≥≥ 
$str
≥≥ '
]
≥≥' (
=
≥≥) *
await
¥¥ 
_context
¥¥ "
.
¥¥" #
Database
¥¥# +
.
¥¥+ , 
ExecuteSqlRawAsync
¥¥, >
(
¥¥> ?
$str
µµ C
,
µµC D

parameters
∂∂ "
:
∂∂" #

multiplier
∂∂$ .
)
∂∂. /
;
∂∂/ 0
}
∑∑ 
return
∏∏ 
View
∏∏ 
(
∏∏ 
)
∏∏ 
;
∏∏ 
}
ππ 	
private
ªª 
bool
ªª 
CourseExists
ªª !
(
ªª! "
int
ªª" %
id
ªª& (
)
ªª( )
{
ºº 	
return
ΩΩ 
_context
ΩΩ 
.
ΩΩ 
Courses
ΩΩ #
.
ΩΩ# $
Any
ΩΩ$ '
(
ΩΩ' (
e
ΩΩ( )
=>
ΩΩ* ,
e
ΩΩ- .
.
ΩΩ. /
CourseID
ΩΩ/ 7
==
ΩΩ8 :
id
ΩΩ; =
)
ΩΩ= >
;
ΩΩ> ?
}
ææ 	
}
øø 
}¿¿ Ç¢
//workspace/Controllers/DepartmentsController.cs
	namespace 	
ContosoUniversity
 
. 
Controllers '
{ 
public 

class !
DepartmentsController &
:' (

Controller) 3
{ 
private 
readonly 
SchoolContext &
_context' /
;/ 0
public !
DepartmentsController $
($ %
SchoolContext% 2
context3 :
): ;
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
var 
schoolContext 
= 
_context  (
.( )
Departments) 4
.4 5
Include5 <
(< =
d= >
=>? A
dB C
.C D
AdministratorD Q
)Q R
;R S
return 
View 
( 
await 
schoolContext +
.+ ,
ToListAsync, 7
(7 8
)8 9
)9 :
;: ;
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Details) 0
(0 1
int1 4
?4 5
id6 8
)8 9
{ 	
if   
(   
id   
==   
null   
)   
{!! 
return"" 
NotFound"" 
(""  
)""  !
;""! "
}## 
string%% 
query%% 
=%% 
$str%% N
;%%N O
var&& 

department&& 
=&& 
await&& "
_context&&# +
.&&+ ,
Departments&&, 7
.'' 

FromSqlRaw'' 
('' 
query'' !
,''! "
id''# %
)''% &
.(( 
Include(( 
((( 
d(( 
=>(( 
d(( 
.((  
Administrator((  -
)((- .
.)) 
AsNoTracking)) 
()) 
))) 
.** 
FirstOrDefaultAsync** $
(**$ %
)**% &
;**& '
if,, 
(,, 

department,, 
==,, 
null,, "
),," #
{-- 
return.. 
NotFound.. 
(..  
)..  !
;..! "
}// 
return11 
View11 
(11 

department11 "
)11" #
;11# $
}22 	
public55 
IActionResult55 
Create55 #
(55# $
)55$ %
{66 	
ViewData77 
[77 
$str77 #
]77# $
=77% &
new77' *

SelectList77+ 5
(775 6
_context776 >
.77> ?
Instructors77? J
,77J K
$str77L P
,77P Q
$str77R \
)77\ ]
;77] ^
return88 
View88 
(88 
)88 
;88 
}99 	
[>> 	
HttpPost>>	 
]>> 
[?? 	$
ValidateAntiForgeryToken??	 !
]??! "
public@@ 
async@@ 
Task@@ 
<@@ 
IActionResult@@ '
>@@' (
Create@@) /
(@@/ 0
[@@0 1
Bind@@1 5
(@@5 6
$str@@6 r
)@@r s
]@@s t

Department@@u 

department
@@Ä ä
)
@@ä ã
{AA 	
ifBB 
(BB 

ModelStateBB 
.BB 
IsValidBB "
)BB" #
{CC 
_contextDD 
.DD 
AddDD 
(DD 

departmentDD '
)DD' (
;DD( )
awaitEE 
_contextEE 
.EE 
SaveChangesAsyncEE /
(EE/ 0
)EE0 1
;EE1 2
returnFF 
RedirectToActionFF '
(FF' (
nameofFF( .
(FF. /
IndexFF/ 4
)FF4 5
)FF5 6
;FF6 7
}GG 
ViewDataHH 
[HH 
$strHH #
]HH# $
=HH% &
newHH' *

SelectListHH+ 5
(HH5 6
_contextHH6 >
.HH> ?
InstructorsHH? J
,HHJ K
$strHHL P
,HHP Q
$strHHR \
,HH\ ]

departmentHH^ h
.HHh i
InstructorIDHHi u
)HHu v
;HHv w
returnII 
ViewII 
(II 

departmentII "
)II" #
;II# $
}JJ 	
publicMM 
asyncMM 
TaskMM 
<MM 
IActionResultMM '
>MM' (
EditMM) -
(MM- .
intMM. 1
?MM1 2
idMM3 5
)MM5 6
{NN 	
ifOO 
(OO 
idOO 
==OO 
nullOO 
)OO 
{PP 
returnQQ 
NotFoundQQ 
(QQ  
)QQ  !
;QQ! "
}RR 
varTT 

departmentTT 
=TT 
awaitTT "
_contextTT# +
.TT+ ,
DepartmentsTT, 7
.UU 
IncludeUU 
(UU 
iUU 
=>UU 
iUU 
.UU  
AdministratorUU  -
)UU- .
.VV 
AsNoTrackingVV 
(VV 
)VV 
.WW 
FirstOrDefaultAsyncWW $
(WW$ %
mWW% &
=>WW' )
mWW* +
.WW+ ,
DepartmentIDWW, 8
==WW9 ;
idWW< >
)WW> ?
;WW? @
ifYY 
(YY 

departmentYY 
==YY 
nullYY "
)YY" #
{ZZ 
return[[ 
NotFound[[ 
([[  
)[[  !
;[[! "
}\\ 
ViewData]] 
[]] 
$str]] #
]]]# $
=]]% &
new]]' *

SelectList]]+ 5
(]]5 6
_context]]6 >
.]]> ?
Instructors]]? J
,]]J K
$str]]L P
,]]P Q
$str]]R \
,]]\ ]

department]]^ h
.]]h i
InstructorID]]i u
)]]u v
;]]v w
return^^ 
View^^ 
(^^ 

department^^ "
)^^" #
;^^# $
}__ 	
[dd 	
HttpPostdd	 
]dd 
[ee 	$
ValidateAntiForgeryTokenee	 !
]ee! "
publicff 
asyncff 
Taskff 
<ff 
IActionResultff '
>ff' (
Editff) -
(ff- .
intff. 1
?ff1 2
idff3 5
,ff5 6
byteff7 ;
[ff; <
]ff< =

rowVersionff> H
)ffH I
{gg 	
ifhh 
(hh 
idhh 
==hh 
nullhh 
)hh 
{ii 
returnjj 
NotFoundjj 
(jj  
)jj  !
;jj! "
}kk 
varmm 
departmentToUpdatemm "
=mm# $
awaitmm% *
_contextmm+ 3
.mm3 4
Departmentsmm4 ?
.mm? @
Includemm@ G
(mmG H
immH I
=>mmJ L
immM N
.mmN O
AdministratormmO \
)mm\ ]
.mm] ^
FirstOrDefaultAsyncmm^ q
(mmq r
mmmr s
=>mmt v
mmmw x
.mmx y
DepartmentID	mmy Ö
==
mmÜ à
id
mmâ ã
)
mmã å
;
mmå ç
ifoo 
(oo 
departmentToUpdateoo "
==oo# %
nulloo& *
)oo* +
{pp 

Departmentqq 
deletedDepartmentqq ,
=qq- .
newqq/ 2

Departmentqq3 =
(qq= >
)qq> ?
;qq? @
awaitrr 
TryUpdateModelAsyncrr )
(rr) *
deletedDepartmentrr* ;
)rr; <
;rr< =

ModelStatess 
.ss 
AddModelErrorss (
(ss( )
stringss) /
.ss/ 0
Emptyss0 5
,ss5 6
$strtt Y
)ttY Z
;ttZ [
ViewDatauu 
[uu 
$struu '
]uu' (
=uu) *
newuu+ .

SelectListuu/ 9
(uu9 :
_contextuu: B
.uuB C
InstructorsuuC N
,uuN O
$struuP T
,uuT U
$struuV `
,uu` a
deletedDepartmentuub s
.uus t
InstructorID	uut Ä
)
uuÄ Å
;
uuÅ Ç
returnvv 
Viewvv 
(vv 
deletedDepartmentvv -
)vv- .
;vv. /
}ww 
_contextyy 
.yy 
Entryyy 
(yy 
departmentToUpdateyy -
)yy- .
.yy. /
Propertyyy/ 7
(yy7 8
$stryy8 D
)yyD E
.yyE F
OriginalValueyyF S
=yyT U

rowVersionyyV `
;yy` a
if{{ 
({{ 
await{{ 
TryUpdateModelAsync{{ )
<{{) *

Department{{* 4
>{{4 5
({{5 6
departmentToUpdate|| "
,||" #
$str}} 
,}} 
s~~ 
=>~~ 
s~~ 
.~~ 
Name~~ 
,~~ 
s~~ 
=>~~ !
s~~" #
.~~# $
	StartDate~~$ -
,~~- .
s~~/ 0
=>~~1 3
s~~4 5
.~~5 6
Budget~~6 <
,~~< =
s~~> ?
=>~~@ B
s~~C D
.~~D E
InstructorID~~E Q
)~~Q R
)~~R S
{ 
try
ÄÄ 
{
ÅÅ 
await
ÇÇ 
_context
ÇÇ "
.
ÇÇ" #
SaveChangesAsync
ÇÇ# 3
(
ÇÇ3 4
)
ÇÇ4 5
;
ÇÇ5 6
return
ÉÉ 
RedirectToAction
ÉÉ +
(
ÉÉ+ ,
nameof
ÉÉ, 2
(
ÉÉ2 3
Index
ÉÉ3 8
)
ÉÉ8 9
)
ÉÉ9 :
;
ÉÉ: ;
}
ÑÑ 
catch
ÖÖ 
(
ÖÖ *
DbUpdateConcurrencyException
ÖÖ 3
ex
ÖÖ4 6
)
ÖÖ6 7
{
ÜÜ 
var
áá 
exceptionEntry
áá &
=
áá' (
ex
áá) +
.
áá+ ,
Entries
áá, 3
.
áá3 4
Single
áá4 :
(
áá: ;
)
áá; <
;
áá< =
var
àà 
clientValues
àà $
=
àà% &
(
àà' (

Department
àà( 2
)
àà2 3
exceptionEntry
àà3 A
.
ààA B
Entity
ààB H
;
ààH I
var
ââ 
databaseEntry
ââ %
=
ââ& '
exceptionEntry
ââ( 6
.
ââ6 7
GetDatabaseValues
ââ7 H
(
ââH I
)
ââI J
;
ââJ K
if
ää 
(
ää 
databaseEntry
ää %
==
ää& (
null
ää) -
)
ää- .
{
ãã 

ModelState
åå "
.
åå" #
AddModelError
åå# 0
(
åå0 1
string
åå1 7
.
åå7 8
Empty
åå8 =
,
åå= >
$str
çç a
)
çça b
;
ççb c
}
éé 
else
èè 
{
êê 
var
ëë 
databaseValues
ëë *
=
ëë+ ,
(
ëë- .

Department
ëë. 8
)
ëë8 9
databaseEntry
ëë9 F
.
ëëF G
ToObject
ëëG O
(
ëëO P
)
ëëP Q
;
ëëQ R
if
ìì 
(
ìì 
databaseValues
ìì *
.
ìì* +
Name
ìì+ /
!=
ìì0 2
clientValues
ìì3 ?
.
ìì? @
Name
ìì@ D
)
ììD E
{
îî 

ModelState
ïï &
.
ïï& '
AddModelError
ïï' 4
(
ïï4 5
$str
ïï5 ;
,
ïï; <
$"
ïï= ?
$str
ïï? N
{
ïïN O
databaseValues
ïïO ]
.
ïï] ^
Name
ïï^ b
}
ïïb c
"
ïïc d
)
ïïd e
;
ïïe f
}
ññ 
if
óó 
(
óó 
databaseValues
óó *
.
óó* +
Budget
óó+ 1
!=
óó2 4
clientValues
óó5 A
.
óóA B
Budget
óóB H
)
óóH I
{
òò 

ModelState
ôô &
.
ôô& '
AddModelError
ôô' 4
(
ôô4 5
$str
ôô5 =
,
ôô= >
$"
ôô? A
$str
ôôA P
{
ôôP Q
databaseValues
ôôQ _
.
ôô_ `
Budget
ôô` f
:
ôôf g
$str
ôôg h
}
ôôh i
"
ôôi j
)
ôôj k
;
ôôk l
}
öö 
if
õõ 
(
õõ 
databaseValues
õõ *
.
õõ* +
	StartDate
õõ+ 4
!=
õõ5 7
clientValues
õõ8 D
.
õõD E
	StartDate
õõE N
)
õõN O
{
úú 

ModelState
ùù &
.
ùù& '
AddModelError
ùù' 4
(
ùù4 5
$str
ùù5 @
,
ùù@ A
$"
ùùB D
$str
ùùD S
{
ùùS T
databaseValues
ùùT b
.
ùùb c
	StartDate
ùùc l
:
ùùl m
$str
ùùm n
}
ùùn o
"
ùùo p
)
ùùp q
;
ùùq r
}
ûû 
if
üü 
(
üü 
databaseValues
üü *
.
üü* +
InstructorID
üü+ 7
!=
üü8 :
clientValues
üü; G
.
üüG H
InstructorID
üüH T
)
üüT U
{
†† 

Instructor
°° & 
databaseInstructor
°°' 9
=
°°: ;
await
°°< A
_context
°°B J
.
°°J K
Instructors
°°K V
.
°°V W!
FirstOrDefaultAsync
°°W j
(
°°j k
i
°°k l
=>
°°m o
i
°°p q
.
°°q r
ID
°°r t
==
°°u w
databaseValues°°x Ü
.°°Ü á
InstructorID°°á ì
)°°ì î
;°°î ï

ModelState
¢¢ &
.
¢¢& '
AddModelError
¢¢' 4
(
¢¢4 5
$str
¢¢5 C
,
¢¢C D
$"
¢¢E G
$str
¢¢G V
{
¢¢V W 
databaseInstructor
¢¢W i
?
¢¢i j
.
¢¢j k
FullName
¢¢k s
}
¢¢s t
"
¢¢t u
)
¢¢u v
;
¢¢v w
}
££ 

ModelState
•• "
.
••" #
AddModelError
••# 0
(
••0 1
string
••1 7
.
••7 8
Empty
••8 =
,
••= >
$str
••? b
+
¶¶  !
$str
¶¶" g
+
ßß  !
$str
ßß" g
+
®®  !
$str
®®" f
+
©©  !
$str
©©" f
)
©©f g
;
©©g h 
departmentToUpdate
™™ *
.
™™* +

RowVersion
™™+ 5
=
™™6 7
(
™™8 9
byte
™™9 =
[
™™= >
]
™™> ?
)
™™? @
databaseValues
™™@ N
.
™™N O

RowVersion
™™O Y
;
™™Y Z

ModelState
´´ "
.
´´" #
Remove
´´# )
(
´´) *
$str
´´* 6
)
´´6 7
;
´´7 8
}
¨¨ 
}
≠≠ 
}
ÆÆ 
ViewData
ØØ 
[
ØØ 
$str
ØØ #
]
ØØ# $
=
ØØ% &
new
ØØ' *

SelectList
ØØ+ 5
(
ØØ5 6
_context
ØØ6 >
.
ØØ> ?
Instructors
ØØ? J
,
ØØJ K
$str
ØØL P
,
ØØP Q
$str
ØØR \
,
ØØ\ ] 
departmentToUpdate
ØØ^ p
.
ØØp q
InstructorID
ØØq }
)
ØØ} ~
;
ØØ~ 
return
∞∞ 
View
∞∞ 
(
∞∞  
departmentToUpdate
∞∞ *
)
∞∞* +
;
∞∞+ ,
}
±± 	
public
¥¥ 
async
¥¥ 
Task
¥¥ 
<
¥¥ 
IActionResult
¥¥ '
>
¥¥' (
Delete
¥¥) /
(
¥¥/ 0
int
¥¥0 3
?
¥¥3 4
id
¥¥5 7
,
¥¥7 8
bool
¥¥9 =
?
¥¥= >
concurrencyError
¥¥? O
)
¥¥O P
{
µµ 	
if
∂∂ 
(
∂∂ 
id
∂∂ 
==
∂∂ 
null
∂∂ 
)
∂∂ 
{
∑∑ 
return
∏∏ 
NotFound
∏∏ 
(
∏∏  
)
∏∏  !
;
∏∏! "
}
ππ 
var
ªª 

department
ªª 
=
ªª 
await
ªª "
_context
ªª# +
.
ªª+ ,
Departments
ªª, 7
.
ºº 
Include
ºº 
(
ºº 
d
ºº 
=>
ºº 
d
ºº 
.
ºº  
Administrator
ºº  -
)
ºº- .
.
ΩΩ 
AsNoTracking
ΩΩ 
(
ΩΩ 
)
ΩΩ 
.
ææ !
FirstOrDefaultAsync
ææ $
(
ææ$ %
m
ææ% &
=>
ææ' )
m
ææ* +
.
ææ+ ,
DepartmentID
ææ, 8
==
ææ9 ;
id
ææ< >
)
ææ> ?
;
ææ? @
if
øø 
(
øø 

department
øø 
==
øø 
null
øø "
)
øø" #
{
¿¿ 
if
¡¡ 
(
¡¡ 
concurrencyError
¡¡ $
.
¡¡$ %
GetValueOrDefault
¡¡% 6
(
¡¡6 7
)
¡¡7 8
)
¡¡8 9
{
¬¬ 
return
√√ 
RedirectToAction
√√ +
(
√√+ ,
nameof
√√, 2
(
√√2 3
Index
√√3 8
)
√√8 9
)
√√9 :
;
√√: ;
}
ƒƒ 
return
≈≈ 
NotFound
≈≈ 
(
≈≈  
)
≈≈  !
;
≈≈! "
}
∆∆ 
if
»» 
(
»» 
concurrencyError
»»  
.
»»  !
GetValueOrDefault
»»! 2
(
»»2 3
)
»»3 4
)
»»4 5
{
…… 
ViewData
   
[
   
$str
   2
]
  2 3
=
  4 5
$str
  6 [
+
ÀÀ 
$str
ÀÀ X
+
ÃÃ 
$str
ÃÃ X
+
ÕÕ 
$str
ÕÕ W
+
ŒŒ 
$str
ŒŒ I
+
œœ 
$str
œœ 9
;
œœ9 :
}
–– 
return
““ 
View
““ 
(
““ 

department
““ "
)
““" #
;
““# $
}
”” 	
[
’’ 	
HttpPost
’’	 
]
’’ 
[
÷÷ 	&
ValidateAntiForgeryToken
÷÷	 !
]
÷÷! "
public
◊◊ 
async
◊◊ 
Task
◊◊ 
<
◊◊ 
IActionResult
◊◊ '
>
◊◊' (
Delete
◊◊) /
(
◊◊/ 0

Department
◊◊0 :

department
◊◊; E
)
◊◊E F
{
ÿÿ 	
try
ŸŸ 
{
⁄⁄ 
if
€€ 
(
€€ 
await
€€ 
_context
€€ "
.
€€" #
Departments
€€# .
.
€€. /
AnyAsync
€€/ 7
(
€€7 8
m
€€8 9
=>
€€: <
m
€€= >
.
€€> ?
DepartmentID
€€? K
==
€€L N

department
€€O Y
.
€€Y Z
DepartmentID
€€Z f
)
€€f g
)
€€g h
{
‹‹ 
_context
›› 
.
›› 
Departments
›› (
.
››( )
Remove
››) /
(
››/ 0

department
››0 :
)
››: ;
;
››; <
await
ﬁﬁ 
_context
ﬁﬁ "
.
ﬁﬁ" #
SaveChangesAsync
ﬁﬁ# 3
(
ﬁﬁ3 4
)
ﬁﬁ4 5
;
ﬁﬁ5 6
}
ﬂﬂ 
return
‡‡ 
RedirectToAction
‡‡ '
(
‡‡' (
nameof
‡‡( .
(
‡‡. /
Index
‡‡/ 4
)
‡‡4 5
)
‡‡5 6
;
‡‡6 7
}
·· 
catch
‚‚ 
(
‚‚ *
DbUpdateConcurrencyException
‚‚ /
)
‚‚8 9
{
„„ 
return
ÂÂ 
RedirectToAction
ÂÂ '
(
ÂÂ' (
nameof
ÂÂ( .
(
ÂÂ. /
Delete
ÂÂ/ 5
)
ÂÂ5 6
,
ÂÂ6 7
new
ÂÂ8 ;
{
ÂÂ< =
concurrencyError
ÂÂ> N
=
ÂÂO P
true
ÂÂQ U
,
ÂÂU V
id
ÂÂW Y
=
ÂÂZ [

department
ÂÂ\ f
.
ÂÂf g
DepartmentID
ÂÂg s
}
ÂÂt u
)
ÂÂu v
;
ÂÂv w
}
ÊÊ 
}
ÁÁ 	
private
ÈÈ 
bool
ÈÈ 
DepartmentExists
ÈÈ %
(
ÈÈ% &
int
ÈÈ& )
id
ÈÈ* ,
)
ÈÈ, -
{
ÍÍ 	
return
ÎÎ 
_context
ÎÎ 
.
ÎÎ 
Departments
ÎÎ '
.
ÎÎ' (
Any
ÎÎ( +
(
ÎÎ+ ,
e
ÎÎ, -
=>
ÎÎ. 0
e
ÎÎ1 2
.
ÎÎ2 3
DepartmentID
ÎÎ3 ?
==
ÎÎ@ B
id
ÎÎC E
)
ÎÎE F
;
ÎÎF G
}
ÏÏ 	
}
ÌÌ 
}ÓÓ ¿$
(/workspace/Controllers/HomeController.cs
	namespace 	
ContosoUniversity
 
. 
Controllers '
{ 
public 

class 
HomeController 
:  !

Controller" ,
{ 
private 
readonly 
SchoolContext &
_context' /
;/ 0
public 
HomeController 
( 
SchoolContext +
context, 3
)3 4
{ 	
_context 
= 
context 
; 
} 	
public 
IActionResult 
Index "
(" #
)# $
{ 	
return 
View 
( 
) 
; 
} 	
public 
async 
Task 
< 
ActionResult &
>& '
About( -
(- .
). /
{ 	
List 
< 
EnrollmentDateGroup $
>$ %
groups& ,
=- .
new/ 2
List3 7
<7 8
EnrollmentDateGroup8 K
>K L
(L M
)M N
;N O
var   
conn   
=   
_context   
.    
Database    (
.  ( )
GetDbConnection  ) 8
(  8 9
)  9 :
;  : ;
try!! 
{"" 
await## 
conn## 
.## 
	OpenAsync## $
(##$ %
)##% &
;##& '
using$$ 
($$ 
var$$ 
command$$ "
=$$# $
conn$$% )
.$$) *
CreateCommand$$* 7
($$7 8
)$$8 9
)$$9 :
{%% 
string&& 
query&&  
=&&! "
$str&&# U
+'' 
$str'' (
+(( 
$str(( <
+)) 
$str)) 3
;))3 4
command** 
.** 
CommandText** '
=**( )
query*** /
;**/ 0
DbDataReader++  
reader++! '
=++( )
await++* /
command++0 7
.++7 8
ExecuteReaderAsync++8 J
(++J K
)++K L
;++L M
if-- 
(-- 
reader-- 
.-- 
HasRows-- &
)--& '
{.. 
while// 
(// 
await// $
reader//% +
.//+ ,
	ReadAsync//, 5
(//5 6
)//6 7
)//7 8
{00 
var11 
row11  #
=11$ %
new11& )
EnrollmentDateGroup11* =
{11> ?
EnrollmentDate11@ N
=11O P
reader11Q W
.11W X
GetDateTime11X c
(11c d
$num11d e
)11e f
,11f g
StudentCount11h t
=11u v
reader11w }
.11} ~
GetInt32	11~ Ü
(
11Ü á
$num
11á à
)
11à â
}
11ä ã
;
11ã å
groups22 "
.22" #
Add22# &
(22& '
row22' *
)22* +
;22+ ,
}33 
}44 
reader55 
.55 
Dispose55 "
(55" #
)55# $
;55$ %
}66 
}77 
finally88 
{99 
conn:: 
.:: 
Close:: 
(:: 
):: 
;:: 
};; 
return<< 
View<< 
(<< 
groups<< 
)<< 
;<<  
}== 	
public?? 
IActionResult?? 
Privacy?? $
(??$ %
)??% &
{@@ 	
returnAA 
ViewAA 
(AA 
)AA 
;AA 
}BB 	
[DD 	
ResponseCacheDD	 
(DD 
DurationDD 
=DD  !
$numDD" #
,DD# $
LocationDD% -
=DD. /!
ResponseCacheLocationDD0 E
.DDE F
NoneDDF J
,DDJ K
NoStoreDDL S
=DDT U
trueDDV Z
)DDZ [
]DD[ \
publicEE 
IActionResultEE 
ErrorEE "
(EE" #
)EE# $
{FF 	
returnGG 
ViewGG 
(GG 
newGG 
ErrorViewModelGG *
{GG+ ,
	RequestIdGG- 6
=GG7 8
ActivityGG9 A
.GGA B
CurrentGGB I
?GGI J
.GGJ K
IdGGK M
??GGN P
HttpContextGGQ \
.GG\ ]
TraceIdentifierGG] l
}GGm n
)GGn o
;GGo p
}HH 	
}II 
}JJ à√
//workspace/Controllers/InstructorsController.cs
	namespace 	
ContosoUniversity
 
. 
Controllers '
{ 
public 

class !
InstructorsController &
:' (

Controller) 3
{ 
private 
readonly 
SchoolContext &
_context' /
;/ 0
public !
InstructorsController $
($ %
SchoolContext% 2
context3 :
): ;
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
int/ 2
?2 3
id4 6
,6 7
int8 ;
?; <
courseID= E
)E F
{ 	
var 
	viewModel 
= 
new 
InstructorIndexData  3
(3 4
)4 5
;5 6
	viewModel 
. 
Instructors !
=" #
await$ )
_context* 2
.2 3
Instructors3 >
. 
Include 
( 
i 
=> 
i  !
.! "
OfficeAssignment" 2
)2 3
. 
Include 
( 
i 
=> 
i  !
.! "
CourseAssignments" 3
)3 4
. 
ThenInclude  
(  !
i! "
=># %
i& '
.' (
Course( .
). /
. 
ThenInclude $
($ %
i% &
=>' )
i* +
.+ ,

Department, 6
)6 7
.   
OrderBy   
(   
i   
=>   
i    !
.  ! "
LastName  " *
)  * +
.!! 
ToListAsync!! 
(!! 
)!!  
;!!  !
if## 
(## 
id## 
!=## 
null## 
)## 
{$$ 
ViewData%% 
[%% 
$str%% '
]%%' (
=%%) *
id%%+ -
.%%- .
Value%%. 3
;%%3 4

Instructor&& 

instructor&& %
=&&& '
	viewModel&&( 1
.&&1 2
Instructors&&2 =
.&&= >
Where&&> C
(&&C D
i'' 
=>'' 
i'' 
.'' 
ID'' 
==''  
id''! #
.''# $
Value''$ )
)'') *
.''* +
Single''+ 1
(''1 2
)''2 3
;''3 4
	viewModel(( 
.(( 
Courses(( !
=((" #

instructor(($ .
.((. /
CourseAssignments((/ @
.((@ A
Select((A G
(((G H
s((H I
=>((J L
s((M N
.((N O
Course((O U
)((U V
;((V W
})) 
if++ 
(++ 
courseID++ 
!=++ 
null++  
)++  !
{,, 
ViewData-- 
[-- 
$str-- #
]--# $
=--% &
courseID--' /
.--/ 0
Value--0 5
;--5 6
var.. 
selectedCourse.. "
=..# $
	viewModel..% .
.... /
Courses../ 6
...6 7
Where..7 <
(..< =
x..= >
=>..? A
x..B C
...C D
CourseID..D L
==..M O
courseID..P X
)..X Y
...Y Z
Single..Z `
(..` a
)..a b
;..b c
await// 
_context// 
.// 
Entry// $
(//$ %
selectedCourse//% 3
)//3 4
.//4 5

Collection//5 ?
(//? @
x//@ A
=>//B D
x//E F
.//F G
Enrollments//G R
)//R S
.//S T
	LoadAsync//T ]
(//] ^
)//^ _
;//_ `
foreach00 
(00 

Enrollment00 #

enrollment00$ .
in00/ 1
selectedCourse002 @
.00@ A
Enrollments00A L
)00L M
{11 
await22 
_context22 "
.22" #
Entry22# (
(22( )

enrollment22) 3
)223 4
.224 5
	Reference225 >
(22> ?
x22? @
=>22A C
x22D E
.22E F
Student22F M
)22M N
.22N O
	LoadAsync22O X
(22X Y
)22Y Z
;22Z [
}33 
	viewModel44 
.44 
Enrollments44 %
=44& '
selectedCourse44( 6
.446 7
Enrollments447 B
;44B C
}55 
return77 
View77 
(77 
	viewModel77 !
)77! "
;77" #
}88 	
public;; 
async;; 
Task;; 
<;; 
IActionResult;; '
>;;' (
Details;;) 0
(;;0 1
int;;1 4
?;;4 5
id;;6 8
);;8 9
{<< 	
if== 
(== 
id== 
==== 
null== 
)== 
{>> 
return?? 
NotFound?? 
(??  
)??  !
;??! "
}@@ 
varBB 

instructorBB 
=BB 
awaitBB "
_contextBB# +
.BB+ ,
InstructorsBB, 7
.CC 
FirstOrDefaultAsyncCC $
(CC$ %
mCC% &
=>CC' )
mCC* +
.CC+ ,
IDCC, .
==CC/ 1
idCC2 4
)CC4 5
;CC5 6
ifDD 
(DD 

instructorDD 
==DD 
nullDD "
)DD" #
{EE 
returnFF 
NotFoundFF 
(FF  
)FF  !
;FF! "
}GG 
returnII 
ViewII 
(II 

instructorII "
)II" #
;II# $
}JJ 	
publicMM 
IActionResultMM 
CreateMM #
(MM# $
)MM$ %
{NN 	
varOO 

instructorOO 
=OO 
newOO  

InstructorOO! +
(OO+ ,
)OO, -
;OO- .

instructorPP 
.PP 
CourseAssignmentsPP (
=PP) *
newPP+ .
ListPP/ 3
<PP3 4
CourseAssignmentPP4 D
>PPD E
(PPE F
)PPF G
;PPG H&
PopulateAssignedCourseDataQQ &
(QQ& '

instructorQQ' 1
)QQ1 2
;QQ2 3
returnRR 
ViewRR 
(RR 
)RR 
;RR 
}SS 	
[VV 	
HttpPostVV	 
]VV 
[WW 	$
ValidateAntiForgeryTokenWW	 !
]WW! "
publicXX 
asyncXX 
TaskXX 
<XX 
IActionResultXX '
>XX' (
CreateXX) /
(XX/ 0
[XX0 1
BindXX1 5
(XX5 6
$strXX6 g
)XXg h
]XXh i

InstructorXXj t

instructorXXu 
,	XX Ä
string
XXÅ á
[
XXá à
]
XXà â
selectedCourses
XXä ô
)
XXô ö
{YY 	
ifZZ 
(ZZ 
selectedCoursesZZ 
!=ZZ  "
nullZZ# '
)ZZ' (
{[[ 

instructor\\ 
.\\ 
CourseAssignments\\ ,
=\\- .
new\\/ 2
List\\3 7
<\\7 8
CourseAssignment\\8 H
>\\H I
(\\I J
)\\J K
;\\K L
foreach]] 
(]] 
var]] 
course]] #
in]]$ &
selectedCourses]]' 6
)]]6 7
{^^ 
var__ 
courseToAdd__ #
=__$ %
new__& )
CourseAssignment__* :
{__; <
InstructorID__= I
=__J K

instructor__L V
.__V W
ID__W Y
,__Y Z
CourseID__[ c
=__d e
int__f i
.__i j
Parse__j o
(__o p
course__p v
)__v w
}__x y
;__y z

instructor`` 
.`` 
CourseAssignments`` 0
.``0 1
Add``1 4
(``4 5
courseToAdd``5 @
)``@ A
;``A B
}aa 
}bb 
ifcc 
(cc 

ModelStatecc 
.cc 
IsValidcc "
)cc" #
{dd 
_contextee 
.ee 
Addee 
(ee 

instructoree '
)ee' (
;ee( )
awaitff 
_contextff 
.ff 
SaveChangesAsyncff /
(ff/ 0
)ff0 1
;ff1 2
returngg 
RedirectToActiongg '
(gg' (
nameofgg( .
(gg. /
Indexgg/ 4
)gg4 5
)gg5 6
;gg6 7
}hh &
PopulateAssignedCourseDataii &
(ii& '

instructorii' 1
)ii1 2
;ii2 3
returnjj 
Viewjj 
(jj 

instructorjj "
)jj" #
;jj# $
}kk 	
publicnn 
asyncnn 
Tasknn 
<nn 
IActionResultnn '
>nn' (
Editnn) -
(nn- .
intnn. 1
?nn1 2
idnn3 5
)nn5 6
{oo 	
ifpp 
(pp 
idpp 
==pp 
nullpp 
)pp 
{qq 
returnrr 
NotFoundrr 
(rr  
)rr  !
;rr! "
}ss 
varuu 

instructoruu 
=uu 
awaituu "
_contextuu# +
.uu+ ,
Instructorsuu, 7
.vv 
Includevv 
(vv 
ivv 
=>vv 
ivv 
.vv  
OfficeAssignmentvv  0
)vv0 1
.ww 
Includeww 
(ww 
iww 
=>ww 
iww 
.ww  
CourseAssignmentsww  1
)ww1 2
.ww2 3
ThenIncludeww3 >
(ww> ?
iww? @
=>wwA C
iwwD E
.wwE F
CoursewwF L
)wwL M
.xx 
AsNoTrackingxx 
(xx 
)xx 
.yy 
FirstOrDefaultAsyncyy $
(yy$ %
myy% &
=>yy' )
myy* +
.yy+ ,
IDyy, .
==yy/ 1
idyy2 4
)yy4 5
;yy5 6
ifzz 
(zz 

instructorzz 
==zz 
nullzz "
)zz" #
{{{ 
return|| 
NotFound|| 
(||  
)||  !
;||! "
}}} &
PopulateAssignedCourseData~~ &
(~~& '

instructor~~' 1
)~~1 2
;~~2 3
return 
View 
( 

instructor "
)" #
;# $
}
ÄÄ 	
private
ÇÇ 
void
ÇÇ (
PopulateAssignedCourseData
ÇÇ /
(
ÇÇ/ 0

Instructor
ÇÇ0 :

instructor
ÇÇ; E
)
ÇÇE F
{
ÉÉ 	
var
ÑÑ 

allCourses
ÑÑ 
=
ÑÑ 
_context
ÑÑ %
.
ÑÑ% &
Courses
ÑÑ& -
;
ÑÑ- .
var
ÖÖ 
instructorCourses
ÖÖ !
=
ÖÖ" #
new
ÖÖ$ '
HashSet
ÖÖ( /
<
ÖÖ/ 0
int
ÖÖ0 3
>
ÖÖ3 4
(
ÖÖ4 5

instructor
ÖÖ5 ?
.
ÖÖ? @
CourseAssignments
ÖÖ@ Q
.
ÖÖQ R
Select
ÖÖR X
(
ÖÖX Y
c
ÖÖY Z
=>
ÖÖ[ ]
c
ÖÖ^ _
.
ÖÖ_ `
CourseID
ÖÖ` h
)
ÖÖh i
)
ÖÖi j
;
ÖÖj k
var
ÜÜ 
	viewModel
ÜÜ 
=
ÜÜ 
new
ÜÜ 
List
ÜÜ  $
<
ÜÜ$ % 
AssignedCourseData
ÜÜ% 7
>
ÜÜ7 8
(
ÜÜ8 9
)
ÜÜ9 :
;
ÜÜ: ;
foreach
áá 
(
áá 
var
áá 
course
áá 
in
áá  "

allCourses
áá# -
)
áá- .
{
àà 
	viewModel
ââ 
.
ââ 
Add
ââ 
(
ââ 
new
ââ ! 
AssignedCourseData
ââ" 4
{
ää 
CourseID
ãã 
=
ãã 
course
ãã %
.
ãã% &
CourseID
ãã& .
,
ãã. /
Title
åå 
=
åå 
course
åå "
.
åå" #
Title
åå# (
,
åå( )
Assigned
çç 
=
çç 
instructorCourses
çç 0
.
çç0 1
Contains
çç1 9
(
çç9 :
course
çç: @
.
çç@ A
CourseID
ççA I
)
ççI J
}
éé 
)
éé 
;
éé 
}
èè 
ViewData
êê 
[
êê 
$str
êê 
]
êê 
=
êê  !
	viewModel
êê" +
;
êê+ ,
}
ëë 	
[
óó 	
HttpPost
óó	 
]
óó 
[
òò 	&
ValidateAntiForgeryToken
òò	 !
]
òò! "
public
ôô 
async
ôô 
Task
ôô 
<
ôô 
IActionResult
ôô '
>
ôô' (
Edit
ôô) -
(
ôô- .
int
ôô. 1
?
ôô1 2
id
ôô3 5
,
ôô5 6
string
ôô7 =
[
ôô= >
]
ôô> ?
selectedCourses
ôô@ O
)
ôôO P
{
öö 	
if
õõ 
(
õõ 
id
õõ 
==
õõ 
null
õõ 
)
õõ 
{
úú 
return
ùù 
NotFound
ùù 
(
ùù  
)
ùù  !
;
ùù! "
}
ûû 
var
††  
instructorToUpdate
†† "
=
††# $
await
††% *
_context
††+ 3
.
††3 4
Instructors
††4 ?
.
°° 
Include
°° 
(
°° 
i
°° 
=>
°° 
i
°° 
.
°°  
OfficeAssignment
°°  0
)
°°0 1
.
¢¢ 
Include
¢¢ 
(
¢¢ 
i
¢¢ 
=>
¢¢ 
i
¢¢ 
.
¢¢  
CourseAssignments
¢¢  1
)
¢¢1 2
.
££ 
ThenInclude
££  
(
££  !
i
££! "
=>
££# %
i
££& '
.
££' (
Course
££( .
)
££. /
.
§§ !
FirstOrDefaultAsync
§§ $
(
§§$ %
m
§§% &
=>
§§' )
m
§§* +
.
§§+ ,
ID
§§, .
==
§§/ 1
id
§§2 4
)
§§4 5
;
§§5 6
if
¶¶ 
(
¶¶ 
await
¶¶ !
TryUpdateModelAsync
¶¶ )
<
¶¶) *

Instructor
¶¶* 4
>
¶¶4 5
(
¶¶5 6 
instructorToUpdate
ßß "
,
ßß" #
$str
®® 
,
®® 
i
©© 
=>
©© 
i
©© 
.
©© 
FirstMidName
©© #
,
©©# $
i
©©% &
=>
©©' )
i
©©* +
.
©©+ ,
LastName
©©, 4
,
©©4 5
i
©©6 7
=>
©©8 :
i
©©; <
.
©©< =
HireDate
©©= E
,
©©E F
i
©©G H
=>
©©I K
i
©©L M
.
©©M N
OfficeAssignment
©©N ^
)
©©^ _
)
©©_ `
{
™™ 
if
´´ 
(
´´ 
String
´´ 
.
´´  
IsNullOrWhiteSpace
´´ -
(
´´- . 
instructorToUpdate
´´. @
.
´´@ A
OfficeAssignment
´´A Q
?
´´Q R
.
´´R S
Location
´´S [
)
´´[ \
)
´´\ ]
{
¨¨  
instructorToUpdate
≠≠ &
.
≠≠& '
OfficeAssignment
≠≠' 7
=
≠≠8 9
null
≠≠: >
;
≠≠> ?
}
ÆÆ %
UpdateInstructorCourses
ØØ '
(
ØØ' (
selectedCourses
ØØ( 7
,
ØØ7 8 
instructorToUpdate
ØØ9 K
)
ØØK L
;
ØØL M
try
∞∞ 
{
±± 
await
≤≤ 
_context
≤≤ "
.
≤≤" #
SaveChangesAsync
≤≤# 3
(
≤≤3 4
)
≤≤4 5
;
≤≤5 6
}
≥≥ 
catch
¥¥ 
(
¥¥ 
DbUpdateException
¥¥ (
)
¥¥1 2
{
µµ 

ModelState
∑∑ 
.
∑∑ 
AddModelError
∑∑ ,
(
∑∑, -
$str
∑∑- /
,
∑∑/ 0
$str
∑∑1 K
+
∑∑L M
$str
∏∏ B
+
∏∏C D
$str
ππ 8
)
ππ8 9
;
ππ9 :
}
∫∫ 
return
ªª 
RedirectToAction
ªª '
(
ªª' (
nameof
ªª( .
(
ªª. /
Index
ªª/ 4
)
ªª4 5
)
ªª5 6
;
ªª6 7
}
ºº %
UpdateInstructorCourses
ΩΩ #
(
ΩΩ# $
selectedCourses
ΩΩ$ 3
,
ΩΩ3 4 
instructorToUpdate
ΩΩ5 G
)
ΩΩG H
;
ΩΩH I(
PopulateAssignedCourseData
ææ &
(
ææ& ' 
instructorToUpdate
ææ' 9
)
ææ9 :
;
ææ: ;
return
øø 
View
øø 
(
øø  
instructorToUpdate
øø *
)
øø* +
;
øø+ ,
}
¿¿ 	
private
¬¬ 
void
¬¬ %
UpdateInstructorCourses
¬¬ ,
(
¬¬, -
string
¬¬- 3
[
¬¬3 4
]
¬¬4 5
selectedCourses
¬¬6 E
,
¬¬E F

Instructor
¬¬G Q 
instructorToUpdate
¬¬R d
)
¬¬d e
{
√√ 	
if
ƒƒ 
(
ƒƒ 
selectedCourses
ƒƒ 
==
ƒƒ  "
null
ƒƒ# '
)
ƒƒ' (
{
≈≈  
instructorToUpdate
∆∆ "
.
∆∆" #
CourseAssignments
∆∆# 4
=
∆∆5 6
new
∆∆7 :
List
∆∆; ?
<
∆∆? @
CourseAssignment
∆∆@ P
>
∆∆P Q
(
∆∆Q R
)
∆∆R S
;
∆∆S T
return
«« 
;
«« 
}
»» 
var
   
selectedCoursesHS
   !
=
  " #
new
  $ '
HashSet
  ( /
<
  / 0
string
  0 6
>
  6 7
(
  7 8
selectedCourses
  8 G
)
  G H
;
  H I
var
ÀÀ 
instructorCourses
ÀÀ !
=
ÀÀ" #
new
ÀÀ$ '
HashSet
ÀÀ( /
<
ÀÀ/ 0
int
ÀÀ0 3
>
ÀÀ3 4
(
ÃÃ  
instructorToUpdate
ÃÃ #
.
ÃÃ# $
CourseAssignments
ÃÃ$ 5
.
ÃÃ5 6
Select
ÃÃ6 <
(
ÃÃ< =
c
ÃÃ= >
=>
ÃÃ? A
c
ÃÃB C
.
ÃÃC D
Course
ÃÃD J
.
ÃÃJ K
CourseID
ÃÃK S
)
ÃÃS T
)
ÃÃT U
;
ÃÃU V
foreach
ÕÕ 
(
ÕÕ 
var
ÕÕ 
course
ÕÕ 
in
ÕÕ  "
_context
ÕÕ# +
.
ÕÕ+ ,
Courses
ÕÕ, 3
)
ÕÕ3 4
{
ŒŒ 
if
œœ 
(
œœ 
selectedCoursesHS
œœ %
.
œœ% &
Contains
œœ& .
(
œœ. /
course
œœ/ 5
.
œœ5 6
CourseID
œœ6 >
.
œœ> ?
ToString
œœ? G
(
œœG H
)
œœH I
)
œœI J
)
œœJ K
{
–– 
if
—— 
(
—— 
!
—— 
instructorCourses
—— *
.
——* +
Contains
——+ 3
(
——3 4
course
——4 :
.
——: ;
CourseID
——; C
)
——C D
)
——D E
{
““  
instructorToUpdate
”” *
.
””* +
CourseAssignments
””+ <
.
””< =
Add
””= @
(
””@ A
new
””A D
CourseAssignment
””E U
{
””V W
InstructorID
””X d
=
””e f 
instructorToUpdate
””g y
.
””y z
ID
””z |
,
””| }
CourseID””~ Ü
=””á à
course””â è
.””è ê
CourseID””ê ò
}””ô ö
)””ö õ
;””õ ú
}
‘‘ 
}
’’ 
else
÷÷ 
{
◊◊ 
if
ŸŸ 
(
ŸŸ 
instructorCourses
ŸŸ )
.
ŸŸ) *
Contains
ŸŸ* 2
(
ŸŸ2 3
course
ŸŸ3 9
.
ŸŸ9 :
CourseID
ŸŸ: B
)
ŸŸB C
)
ŸŸC D
{
⁄⁄ 
CourseAssignment
€€ (
courseToRemove
€€) 7
=
€€8 9 
instructorToUpdate
€€: L
.
€€L M
CourseAssignments
€€M ^
.
€€^ _
FirstOrDefault
€€_ m
(
€€m n
i
€€n o
=>
€€p r
i
€€s t
.
€€t u
CourseID
€€u }
==€€~ Ä
course€€Å á
.€€á à
CourseID€€à ê
)€€ê ë
;€€ë í
_context
‹‹  
.
‹‹  !
Remove
‹‹! '
(
‹‹' (
courseToRemove
‹‹( 6
)
‹‹6 7
;
‹‹7 8
}
›› 
}
ﬁﬁ 
}
ﬂﬂ 
}
‡‡ 	
public
„„ 
async
„„ 
Task
„„ 
<
„„ 
IActionResult
„„ '
>
„„' (
Delete
„„) /
(
„„/ 0
int
„„0 3
?
„„3 4
id
„„5 7
)
„„7 8
{
‰‰ 	
if
ÂÂ 
(
ÂÂ 
id
ÂÂ 
==
ÂÂ 
null
ÂÂ 
)
ÂÂ 
{
ÊÊ 
return
ÁÁ 
NotFound
ÁÁ 
(
ÁÁ  
)
ÁÁ  !
;
ÁÁ! "
}
ËË 
var
ÍÍ 

instructor
ÍÍ 
=
ÍÍ 
await
ÍÍ "
_context
ÍÍ# +
.
ÍÍ+ ,
Instructors
ÍÍ, 7
.
ÎÎ !
FirstOrDefaultAsync
ÎÎ $
(
ÎÎ$ %
m
ÎÎ% &
=>
ÎÎ' )
m
ÎÎ* +
.
ÎÎ+ ,
ID
ÎÎ, .
==
ÎÎ/ 1
id
ÎÎ2 4
)
ÎÎ4 5
;
ÎÎ5 6
if
ÏÏ 
(
ÏÏ 

instructor
ÏÏ 
==
ÏÏ 
null
ÏÏ "
)
ÏÏ" #
{
ÌÌ 
return
ÓÓ 
NotFound
ÓÓ 
(
ÓÓ  
)
ÓÓ  !
;
ÓÓ! "
}
ÔÔ 
return
ÒÒ 
View
ÒÒ 
(
ÒÒ 

instructor
ÒÒ "
)
ÒÒ" #
;
ÒÒ# $
}
ÚÚ 	
[
ıı 	
HttpPost
ıı	 
,
ıı 

ActionName
ıı 
(
ıı 
$str
ıı &
)
ıı& '
]
ıı' (
[
ˆˆ 	&
ValidateAntiForgeryToken
ˆˆ	 !
]
ˆˆ! "
public
˜˜ 
async
˜˜ 
Task
˜˜ 
<
˜˜ 
IActionResult
˜˜ '
>
˜˜' (
DeleteConfirmed
˜˜) 8
(
˜˜8 9
int
˜˜9 <
id
˜˜= ?
)
˜˜? @
{
¯¯ 	

Instructor
˘˘ 

instructor
˘˘ !
=
˘˘" #
await
˘˘$ )
_context
˘˘* 2
.
˘˘2 3
Instructors
˘˘3 >
.
˙˙ 
Include
˙˙ 
(
˙˙ 
i
˙˙ 
=>
˙˙ 
i
˙˙ 
.
˙˙  
CourseAssignments
˙˙  1
)
˙˙1 2
.
˚˚ 
SingleAsync
˚˚ 
(
˚˚ 
i
˚˚ 
=>
˚˚ !
i
˚˚" #
.
˚˚# $
ID
˚˚$ &
==
˚˚' )
id
˚˚* ,
)
˚˚, -
;
˚˚- .
var
˝˝ 
departments
˝˝ 
=
˝˝ 
await
˝˝ #
_context
˝˝$ ,
.
˝˝, -
Departments
˝˝- 8
.
˛˛ 
Where
˛˛ 
(
˛˛ 
d
˛˛ 
=>
˛˛ 
d
˛˛ 
.
˛˛ 
InstructorID
˛˛ *
==
˛˛+ -
id
˛˛. 0
)
˛˛0 1
.
ˇˇ 
ToListAsync
ˇˇ 
(
ˇˇ 
)
ˇˇ 
;
ˇˇ 
departments
ÄÄ 
.
ÄÄ 
ForEach
ÄÄ 
(
ÄÄ  
d
ÄÄ  !
=>
ÄÄ" $
d
ÄÄ% &
.
ÄÄ& '
InstructorID
ÄÄ' 3
=
ÄÄ4 5
null
ÄÄ6 :
)
ÄÄ: ;
;
ÄÄ; <
_context
ÇÇ 
.
ÇÇ 
Instructors
ÇÇ  
.
ÇÇ  !
Remove
ÇÇ! '
(
ÇÇ' (

instructor
ÇÇ( 2
)
ÇÇ2 3
;
ÇÇ3 4
await
ÑÑ 
_context
ÑÑ 
.
ÑÑ 
SaveChangesAsync
ÑÑ +
(
ÑÑ+ ,
)
ÑÑ, -
;
ÑÑ- .
return
ÖÖ 
RedirectToAction
ÖÖ #
(
ÖÖ# $
nameof
ÖÖ$ *
(
ÖÖ* +
Index
ÖÖ+ 0
)
ÖÖ0 1
)
ÖÖ1 2
;
ÖÖ2 3
}
ÜÜ 	
private
àà 
bool
àà 
InstructorExists
àà %
(
àà% &
int
àà& )
id
àà* ,
)
àà, -
{
ââ 	
return
ää 
_context
ää 
.
ää 
Instructors
ää '
.
ää' (
Any
ää( +
(
ää+ ,
e
ää, -
=>
ää. 0
e
ää1 2
.
ää2 3
ID
ää3 5
==
ää6 8
id
ää9 ;
)
ää; <
;
ää< =
}
ãã 	
}
åå 
}çç ƒ
,/workspace/Controllers/StudentsController.cs
	namespace 	
ContosoUniversity
 
. 
Controllers '
{ 
public 

class 
StudentsController #
:$ %

Controller& 0
{ 
private 
readonly 
SchoolContext &
_context' /
;/ 0
public 
StudentsController !
(! "
SchoolContext" /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
string 
	sortOrder 
, 
string 
currentFilter  
,  !
string 
searchString 
,  
int 
? 

pageNumber 
) 
{ 	
ViewData 
[ 
$str "
]" #
=$ %
	sortOrder& /
;/ 0
ViewData 
[ 
$str #
]# $
=% &
String' -
.- .
IsNullOrEmpty. ;
(; <
	sortOrder< E
)E F
?G H
$strI T
:U V
$strW Y
;Y Z
ViewData 
[ 
$str #
]# $
=% &
	sortOrder' 0
==1 3
$str4 :
?; <
$str= H
:I J
$strK Q
;Q R
if!! 
(!! 
searchString!! 
!=!! 
null!!  $
)!!$ %
{"" 

pageNumber## 
=## 
$num## 
;## 
}$$ 
else%% 
{&& 
searchString'' 
='' 
currentFilter'' ,
;'', -
}(( 
ViewData** 
[** 
$str** $
]**$ %
=**& '
searchString**( 4
;**4 5
var,, 
students,, 
=,, 
from,, 
s,,  !
in,," $
_context,,% -
.,,- .
Students,,. 6
select-- !
s--" #
;--# $
if.. 
(.. 
!.. 
String.. 
... 
IsNullOrEmpty.. %
(..% &
searchString..& 2
)..2 3
)..3 4
{// 
students00 
=00 
students00 #
.00# $
Where00$ )
(00) *
s00* +
=>00, .
s00/ 0
.000 1
LastName001 9
.009 :
Contains00: B
(00B C
searchString00C O
)00O P
||11' )
s11* +
.11+ ,
FirstMidName11, 8
.118 9
Contains119 A
(11A B
searchString11B N
)11N O
)11O P
;11P Q
}22 
switch33 
(33 
	sortOrder33 
)33 
{44 
case55 
$str55  
:55  !
students66 
=66 
students66 '
.66' (
OrderByDescending66( 9
(669 :
s66: ;
=>66< >
s66? @
.66@ A
LastName66A I
)66I J
;66J K
break77 
;77 
case88 
$str88 
:88 
students99 
=99 
students99 '
.99' (
OrderBy99( /
(99/ 0
s990 1
=>992 4
s995 6
.996 7
EnrollmentDate997 E
)99E F
;99F G
break:: 
;:: 
case;; 
$str;;  
:;;  !
students<< 
=<< 
students<< '
.<<' (
OrderByDescending<<( 9
(<<9 :
s<<: ;
=><<< >
s<<? @
.<<@ A
EnrollmentDate<<A O
)<<O P
;<<P Q
break== 
;== 
default>> 
:>> 
students?? 
=?? 
students?? '
.??' (
OrderBy??( /
(??/ 0
s??0 1
=>??2 4
s??5 6
.??6 7
LastName??7 ?
)??? @
;??@ A
break@@ 
;@@ 
}AA 
intCC 
pageSizeCC 
=CC 
$numCC 
;CC 
returnDD 
ViewDD 
(DD 
awaitDD 
PaginatedListDD +
<DD+ ,
StudentDD, 3
>DD3 4
.DD4 5
CreateAsyncDD5 @
(DD@ A
studentsDDA I
.DDI J
AsNoTrackingDDJ V
(DDV W
)DDW X
,DDX Y

pageNumberDDZ d
??DDe g
$numDDh i
,DDi j
pageSizeDDk s
)DDs t
)DDt u
;DDu v
}EE 	
publicHH 
asyncHH 
TaskHH 
<HH 
IActionResultHH '
>HH' (
DetailsHH) 0
(HH0 1
intHH1 4
?HH4 5
idHH6 8
)HH8 9
{II 	
ifJJ 
(JJ 
idJJ 
==JJ 
nullJJ 
)JJ 
{KK 
returnLL 
NotFoundLL 
(LL  
)LL  !
;LL! "
}MM 
varOO 
studentOO 
=OO 
awaitOO 
_contextOO  (
.OO( )
StudentsOO) 1
.PP 
IncludePP 
(PP 
sPP 
=>PP 
sPP  
.PP  !
EnrollmentsPP! ,
)PP, -
.QQ 
ThenIncludeQQ !
(QQ! "
eQQ" #
=>QQ$ &
eQQ' (
.QQ( )
CourseQQ) /
)QQ/ 0
.RR 
AsNoTrackingRR 
(RR 
)RR  
.SS 
FirstOrDefaultAsyncSS %
(SS% &
mSS& '
=>SS( *
mSS+ ,
.SS, -
IDSS- /
==SS0 2
idSS3 5
)SS5 6
;SS6 7
ifUU 
(UU 
studentUU 
==UU 
nullUU 
)UU  
{VV 
returnWW 
NotFoundWW 
(WW  
)WW  !
;WW! "
}XX 
returnZZ 
ViewZZ 
(ZZ 
studentZZ 
)ZZ  
;ZZ  !
}[[ 	
public^^ 
IActionResult^^ 
Create^^ #
(^^# $
)^^$ %
{__ 	
return`` 
View`` 
(`` 
)`` 
;`` 
}aa 	
[ff 	
HttpPostff	 
]ff 
[gg 	$
ValidateAntiForgeryTokengg	 !
]gg! "
publichh 
asynchh 
Taskhh 
<hh 
IActionResulthh '
>hh' (
Createhh) /
(hh/ 0
[ii 
Bindii 
(ii 
$strii 8
)ii8 9
]ii9 :
Studentii; B
studentiiC J
)iiJ K
{jj 	
trykk 
{ll 
ifmm 
(mm 

ModelStatemm 
.mm 
IsValidmm &
)mm& '
{nn 
_contextoo 
.oo 
Addoo  
(oo  !
studentoo! (
)oo( )
;oo) *
awaitpp 
_contextpp "
.pp" #
SaveChangesAsyncpp# 3
(pp3 4
)pp4 5
;pp5 6
returnqq 
RedirectToActionqq +
(qq+ ,
nameofqq, 2
(qq2 3
Indexqq3 8
)qq8 9
)qq9 :
;qq: ;
}rr 
}ss 
catchtt 
(tt 
DbUpdateExceptiontt $
)tt- .
{uu 

ModelStateww 
.ww 
AddModelErrorww (
(ww( )
$strww) +
,ww+ ,
$strww- G
+wwH I
$strxx =
+xx> ?
$stryy 4
)yy4 5
;yy5 6
}zz 
return{{ 
View{{ 
({{ 
student{{ 
){{  
;{{  !
}|| 	
public 
async 
Task 
< 
IActionResult '
>' (
Edit) -
(- .
int. 1
?1 2
id3 5
)5 6
{
ÄÄ 	
if
ÅÅ 
(
ÅÅ 
id
ÅÅ 
==
ÅÅ 
null
ÅÅ 
)
ÅÅ 
{
ÇÇ 
return
ÉÉ 
NotFound
ÉÉ 
(
ÉÉ  
)
ÉÉ  !
;
ÉÉ! "
}
ÑÑ 
var
ÜÜ 
student
ÜÜ 
=
ÜÜ 
await
ÜÜ 
_context
ÜÜ  (
.
ÜÜ( )
Students
ÜÜ) 1
.
ÜÜ1 2
	FindAsync
ÜÜ2 ;
(
ÜÜ; <
id
ÜÜ< >
)
ÜÜ> ?
;
ÜÜ? @
if
áá 
(
áá 
student
áá 
==
áá 
null
áá 
)
áá  
{
àà 
return
ââ 
NotFound
ââ 
(
ââ  
)
ââ  !
;
ââ! "
}
ää 
return
ãã 
View
ãã 
(
ãã 
student
ãã 
)
ãã  
;
ãã  !
}
åå 	
[
ëë 	
HttpPost
ëë	 
,
ëë 

ActionName
ëë 
(
ëë 
$str
ëë $
)
ëë$ %
]
ëë% &
[
íí 	&
ValidateAntiForgeryToken
íí	 !
]
íí! "
public
ìì 
async
ìì 
Task
ìì 
<
ìì 
IActionResult
ìì '
>
ìì' (
EditPost
ìì) 1
(
ìì1 2
int
ìì2 5
?
ìì5 6
id
ìì7 9
)
ìì9 :
{
îî 	
if
ïï 
(
ïï 
id
ïï 
==
ïï 
null
ïï 
)
ïï 
{
ññ 
return
óó 
NotFound
óó 
(
óó  
)
óó  !
;
óó! "
}
òò 
var
ôô 
studentToUpdate
ôô 
=
ôô  !
await
ôô" '
_context
ôô( 0
.
ôô0 1
Students
ôô1 9
.
ôô9 :!
FirstOrDefaultAsync
ôô: M
(
ôôM N
s
ôôN O
=>
ôôP R
s
ôôS T
.
ôôT U
ID
ôôU W
==
ôôX Z
id
ôô[ ]
)
ôô] ^
;
ôô^ _
if
öö 
(
öö 
await
öö !
TryUpdateModelAsync
öö )
<
öö) *
Student
öö* 1
>
öö1 2
(
öö2 3
studentToUpdate
õõ 
,
õõ  
$str
úú 
,
úú 
s
ùù 
=>
ùù 
s
ùù 
.
ùù 
FirstMidName
ùù #
,
ùù# $
s
ùù% &
=>
ùù' )
s
ùù* +
.
ùù+ ,
LastName
ùù, 4
,
ùù4 5
s
ùù6 7
=>
ùù8 :
s
ùù; <
.
ùù< =
EnrollmentDate
ùù= K
)
ùùK L
)
ùùL M
{
ûû 
try
üü 
{
†† 
await
°° 
_context
°° "
.
°°" #
SaveChangesAsync
°°# 3
(
°°3 4
)
°°4 5
;
°°5 6
return
¢¢ 
RedirectToAction
¢¢ +
(
¢¢+ ,
nameof
¢¢, 2
(
¢¢2 3
Index
¢¢3 8
)
¢¢8 9
)
¢¢9 :
;
¢¢: ;
}
££ 
catch
§§ 
(
§§ 
DbUpdateException
§§ (
)
§§1 2
{
•• 

ModelState
ßß 
.
ßß 
AddModelError
ßß ,
(
ßß, -
$str
ßß- /
,
ßß/ 0
$str
ßß1 K
+
ßßL M
$str
®® B
+
®®C D
$str
©© 8
)
©©8 9
;
©©9 :
}
™™ 
}
´´ 
return
¨¨ 
View
¨¨ 
(
¨¨ 
studentToUpdate
¨¨ '
)
¨¨' (
;
¨¨( )
}
≠≠ 	
public
∞∞ 
async
∞∞ 
Task
∞∞ 
<
∞∞ 
IActionResult
∞∞ '
>
∞∞' (
Delete
∞∞) /
(
∞∞/ 0
int
∞∞0 3
?
∞∞3 4
id
∞∞5 7
,
∞∞7 8
bool
∞∞9 =
?
∞∞= >
saveChangesError
∞∞? O
=
∞∞P Q
false
∞∞R W
)
∞∞W X
{
±± 	
if
≤≤ 
(
≤≤ 
id
≤≤ 
==
≤≤ 
null
≤≤ 
)
≤≤ 
{
≥≥ 
return
¥¥ 
NotFound
¥¥ 
(
¥¥  
)
¥¥  !
;
¥¥! "
}
µµ 
var
∑∑ 
student
∑∑ 
=
∑∑ 
await
∑∑ 
_context
∑∑  (
.
∑∑( )
Students
∑∑) 1
.
∏∏ 
AsNoTracking
∏∏ 
(
∏∏ 
)
∏∏ 
.
ππ !
FirstOrDefaultAsync
ππ $
(
ππ$ %
m
ππ% &
=>
ππ' )
m
ππ* +
.
ππ+ ,
ID
ππ, .
==
ππ/ 1
id
ππ2 4
)
ππ4 5
;
ππ5 6
if
∫∫ 
(
∫∫ 
student
∫∫ 
==
∫∫ 
null
∫∫ 
)
∫∫  
{
ªª 
return
ºº 
NotFound
ºº 
(
ºº  
)
ºº  !
;
ºº! "
}
ΩΩ 
if
øø 
(
øø 
saveChangesError
øø  
.
øø  !
GetValueOrDefault
øø! 2
(
øø2 3
)
øø3 4
)
øø4 5
{
¿¿ 
ViewData
¡¡ 
[
¡¡ 
$str
¡¡ '
]
¡¡' (
=
¡¡) *
$str
¬¬ L
+
¬¬M N
$str
√√ 4
;
√√4 5
}
ƒƒ 
return
∆∆ 
View
∆∆ 
(
∆∆ 
student
∆∆ 
)
∆∆  
;
∆∆  !
}
«« 	
[
…… 	
HttpPost
……	 
,
…… 

ActionName
…… 
(
…… 
$str
…… &
)
……& '
]
……' (
[
   	&
ValidateAntiForgeryToken
  	 !
]
  ! "
public
ÀÀ 
async
ÀÀ 
Task
ÀÀ 
<
ÀÀ 
IActionResult
ÀÀ '
>
ÀÀ' (
DeleteConfirmed
ÀÀ) 8
(
ÀÀ8 9
int
ÀÀ9 <
id
ÀÀ= ?
)
ÀÀ? @
{
ÃÃ 	
var
ÕÕ 
student
ÕÕ 
=
ÕÕ 
await
ÕÕ 
_context
ÕÕ  (
.
ÕÕ( )
Students
ÕÕ) 1
.
ÕÕ1 2
	FindAsync
ÕÕ2 ;
(
ÕÕ; <
id
ÕÕ< >
)
ÕÕ> ?
;
ÕÕ? @
if
ŒŒ 
(
ŒŒ 
student
ŒŒ 
==
ŒŒ 
null
ŒŒ 
)
ŒŒ  
{
œœ 
return
–– 
RedirectToAction
–– '
(
––' (
nameof
––( .
(
––. /
Index
––/ 4
)
––4 5
)
––5 6
;
––6 7
}
—— 
try
”” 
{
‘‘ 
_context
’’ 
.
’’ 
Students
’’ !
.
’’! "
Remove
’’" (
(
’’( )
student
’’) 0
)
’’0 1
;
’’1 2
await
÷÷ 
_context
÷÷ 
.
÷÷ 
SaveChangesAsync
÷÷ /
(
÷÷/ 0
)
÷÷0 1
;
÷÷1 2
return
◊◊ 
RedirectToAction
◊◊ '
(
◊◊' (
nameof
◊◊( .
(
◊◊. /
Index
◊◊/ 4
)
◊◊4 5
)
◊◊5 6
;
◊◊6 7
}
ÿÿ 
catch
ŸŸ 
(
ŸŸ 
DbUpdateException
ŸŸ $
)
ŸŸ- .
{
⁄⁄ 
return
‹‹ 
RedirectToAction
‹‹ '
(
‹‹' (
nameof
‹‹( .
(
‹‹. /
Delete
‹‹/ 5
)
‹‹5 6
,
‹‹6 7
new
‹‹8 ;
{
‹‹< =
id
‹‹> @
=
‹‹A B
id
‹‹C E
,
‹‹E F
saveChangesError
‹‹G W
=
‹‹X Y
true
‹‹Z ^
}
‹‹_ `
)
‹‹` a
;
‹‹a b
}
›› 
}
ﬁﬁ 	
private
‡‡ 
bool
‡‡ 
StudentExists
‡‡ "
(
‡‡" #
int
‡‡# &
id
‡‡' )
)
‡‡) *
{
·· 	
return
‚‚ 
_context
‚‚ 
.
‚‚ 
Students
‚‚ $
.
‚‚$ %
Any
‚‚% (
(
‚‚( )
e
‚‚) *
=>
‚‚+ -
e
‚‚. /
.
‚‚/ 0
ID
‚‚0 2
==
‚‚3 5
id
‚‚6 8
)
‚‚8 9
;
‚‚9 :
}
„„ 	
}
‰‰ 
}ÂÂ ïÄ
 /workspace/Data/DbInitializer.cs
	namespace 	
ContosoUniversity
 
. 
Data  
{ 
public		 

static		 
class		 
DbInitializer		 %
{

 
public 
static 
void 

Initialize %
(% &
SchoolContext& 3
context4 ;
); <
{ 	
if 
( 
context 
. 
Students  
.  !
Any! $
($ %
)% &
)& '
{ 
return 
; 
} 
var 
students 
= 
new 
Student &
[& '
]' (
{ 
new 
Student 
{ 
FirstMidName *
=+ ,
$str- 5
,5 6
LastName9 A
=B C
$strD O
,O P
EnrollmentDate "
=# $
DateTime% -
.- .
Parse. 3
(3 4
$str4 @
)@ A
}B C
,C D
new 
Student 
{ 
FirstMidName *
=+ ,
$str- 7
,7 8
LastName9 A
=B C
$strD L
,L M
EnrollmentDate "
=# $
DateTime% -
.- .
Parse. 3
(3 4
$str4 @
)@ A
}B C
,C D
new 
Student 
{ 
FirstMidName *
=+ ,
$str- 5
,5 6
LastName9 A
=B C
$strD K
,K L
EnrollmentDate "
=# $
DateTime% -
.- .
Parse. 3
(3 4
$str4 @
)@ A
}B C
,C D
new 
Student 
{ 
FirstMidName *
=+ ,
$str- 4
,4 5
LastName9 A
=B C
$strD O
,O P
EnrollmentDate "
=# $
DateTime% -
.- .
Parse. 3
(3 4
$str4 @
)@ A
}B C
,C D
new 
Student 
{ 
FirstMidName *
=+ ,
$str- 2
,2 3
LastName9 A
=B C
$strD H
,H I
EnrollmentDate   "
=  # $
DateTime  % -
.  - .
Parse  . 3
(  3 4
$str  4 @
)  @ A
}  B C
,  C D
new!! 
Student!! 
{!! 
FirstMidName!! *
=!!+ ,
$str!!- 4
,!!4 5
LastName!!9 A
=!!B C
$str!!D M
,!!M N
EnrollmentDate"" "
=""# $
DateTime""% -
.""- .
Parse"". 3
(""3 4
$str""4 @
)""@ A
}""B C
,""C D
new## 
Student## 
{## 
FirstMidName## *
=##+ ,
$str##- 4
,##4 5
LastName##9 A
=##B C
$str##D L
,##L M
EnrollmentDate$$ "
=$$# $
DateTime$$% -
.$$- .
Parse$$. 3
($$3 4
$str$$4 @
)$$@ A
}$$B C
,$$C D
new%% 
Student%% 
{%% 
FirstMidName%% *
=%%+ ,
$str%%- 3
,%%3 4
LastName%%9 A
=%%B C
$str%%D N
,%%N O
EnrollmentDate&& "
=&&# $
DateTime&&% -
.&&- .
Parse&&. 3
(&&3 4
$str&&4 @
)&&@ A
}&&B C
}'' 
;'' 
context)) 
.)) 
Students)) 
.)) 
AddRange)) %
())% &
students))& .
))). /
;))/ 0
context** 
.** 
SaveChanges** 
(**  
)**  !
;**! "
var,, 
instructors,, 
=,, 
new,, !

Instructor,," ,
[,,, -
],,- .
{-- 
new.. 

Instructor.. 
{..  
FirstMidName..! -
=... /
$str..0 5
,..5 6
LastName..; C
=..D E
$str..F S
,..S T
HireDate// 
=// 
DateTime// '
.//' (
Parse//( -
(//- .
$str//. :
)//: ;
}//< =
,//= >
new00 

Instructor00 
{00  
FirstMidName00! -
=00. /
$str000 6
,006 7
LastName00; C
=00D E
$str00F P
,00P Q
HireDate11 
=11 
DateTime11 '
.11' (
Parse11( -
(11- .
$str11. :
)11: ;
}11< =
,11= >
new22 

Instructor22 
{22  
FirstMidName22! -
=22. /
$str220 7
,227 8
LastName22; C
=22D E
$str22F M
,22M N
HireDate33 
=33 
DateTime33 '
.33' (
Parse33( -
(33- .
$str33. :
)33: ;
}33< =
,33= >
new44 

Instructor44 
{44  
FirstMidName44! -
=44. /
$str440 9
,449 :
LastName44; C
=44D E
$str44F N
,44N O
HireDate55 
=55 
DateTime55 '
.55' (
Parse55( -
(55- .
$str55. :
)55: ;
}55< =
,55= >
new66 

Instructor66 
{66  
FirstMidName66! -
=66. /
$str660 7
,667 8
LastName66; C
=66D E
$str66F M
,66M N
HireDate77 
=77 
DateTime77 '
.77' (
Parse77( -
(77- .
$str77. :
)77: ;
}77< =
}88 
;88 
context:: 
.:: 
Instructors:: 
.::  
AddRange::  (
(::( )
instructors::) 4
)::4 5
;::5 6
context;; 
.;; 
SaveChanges;; 
(;;  
);;  !
;;;! "
var== 
departments== 
=== 
new== !

Department==" ,
[==, -
]==- .
{>> 
new?? 

Department?? 
{??  
Name??! %
=??& '
$str??( 1
,??1 2
Budget??7 =
=??> ?
$num??@ F
,??F G
	StartDate@@ 
=@@ 
DateTime@@  (
.@@( )
Parse@@) .
(@@. /
$str@@/ ;
)@@; <
,@@< =
InstructorIDAA  
=AA" #
instructorsAA$ /
.AA/ 0
SingleAA0 6
(AA6 7
iAA8 9
=>AA: <
iAA= >
.AA> ?
LastNameAA? G
==AAH J
$strAAK X
)AAX Y
.AAY Z
IDAAZ \
}AA] ^
,AA^ _
newBB 

DepartmentBB 
{BB  
NameBB! %
=BB& '
$strBB( 5
,BB5 6
BudgetBB7 =
=BB> ?
$numBB@ F
,BBF G
	StartDateCC 
=CC 
DateTimeCC  (
.CC( )
ParseCC) .
(CC. /
$strCC/ ;
)CC; <
,CC< =
InstructorIDDD  
=DD" #
instructorsDD$ /
.DD/ 0
SingleDD0 6
(DD6 7
iDD8 9
=>DD: <
iDD= >
.DD> ?
LastNameDD? G
==DDH J
$strDDK U
)DDU V
.DDV W
IDDDW Y
}DDZ [
,DD[ \
newEE 

DepartmentEE 
{EE  
NameEE! %
=EE& '
$strEE( 5
,EE5 6
BudgetEE7 =
=EE> ?
$numEE@ F
,EEF G
	StartDateFF 
=FF 
DateTimeFF  (
.FF( )
ParseFF) .
(FF. /
$strFF/ ;
)FF; <
,FF< =
InstructorIDGG  
=GG" #
instructorsGG$ /
.GG/ 0
SingleGG0 6
(GG6 7
iGG8 9
=>GG: <
iGG= >
.GG> ?
LastNameGG? G
==GGH J
$strGGK R
)GGR S
.GGS T
IDGGT V
}GGW X
,GGX Y
newHH 

DepartmentHH 
{HH  
NameHH! %
=HH& '
$strHH( 3
,HH3 4
BudgetHH7 =
=HH> ?
$numHH@ F
,HHF G
	StartDateII 
=II 
DateTimeII  (
.II( )
ParseII) .
(II. /
$strII/ ;
)II; <
,II< =
InstructorIDJJ  
=JJ" #
instructorsJJ$ /
.JJ/ 0
SingleJJ0 6
(JJ6 7
iJJ8 9
=>JJ: <
iJJ= >
.JJ> ?
LastNameJJ? G
==JJH J
$strJJK S
)JJS T
.JJT U
IDJJU W
}JJX Y
}KK 
;KK 
contextMM 
.MM 
DepartmentsMM 
.MM  
AddRangeMM  (
(MM( )
departmentsMM) 4
)MM4 5
;MM5 6
contextNN 
.NN 
SaveChangesNN 
(NN  
)NN  !
;NN! "
varPP 
coursesPP 
=PP 
newPP 
CoursePP $
[PP$ %
]PP% &
{QQ 
newRR 
CourseRR 
{RR 
CourseIDRR $
=RR% &
$numRR' +
,RR+ ,
TitleRR- 2
=RR3 4
$strRR5 @
,RR@ A
CreditsRRG N
=RRO P
$numRRQ R
,RRR S
DepartmentIDSS  
=SS! "
departmentsSS# .
.SS. /
SingleSS/ 5
(SS5 6
sSS7 8
=>SS9 ;
sSS< =
.SS= >
NameSS> B
==SSC E
$strSSF S
)SSS T
.SST U
DepartmentIDSSU a
}TT 
,TT 
newUU 
CourseUU 
{UU 
CourseIDUU $
=UU% &
$numUU' +
,UU+ ,
TitleUU- 2
=UU3 4
$strUU5 E
,UUE F
CreditsUUG N
=UUO P
$numUUQ R
,UUR S
DepartmentIDVV  
=VV! "
departmentsVV# .
.VV. /
SingleVV/ 5
(VV5 6
sVV7 8
=>VV9 ;
sVV< =
.VV= >
NameVV> B
==VVC E
$strVVF Q
)VVQ R
.VVR S
DepartmentIDVVS _
}WW 
,WW 
newXX 
CourseXX 
{XX 
CourseIDXX $
=XX% &
$numXX' +
,XX+ ,
TitleXX- 2
=XX3 4
$strXX5 E
,XXE F
CreditsXXG N
=XXO P
$numXXQ R
,XXR S
DepartmentIDYY  
=YY! "
departmentsYY# .
.YY. /
SingleYY/ 5
(YY5 6
sYY7 8
=>YY9 ;
sYY< =
.YY= >
NameYY> B
==YYC E
$strYYF Q
)YYQ R
.YYR S
DepartmentIDYYS _
}ZZ 
,ZZ 
new[[ 
Course[[ 
{[[ 
CourseID[[ $
=[[% &
$num[[' +
,[[+ ,
Title[[- 2
=[[3 4
$str[[5 ?
,[[? @
Credits[[G N
=[[O P
$num[[Q R
,[[R S
DepartmentID\\  
=\\! "
departments\\# .
.\\. /
Single\\/ 5
(\\5 6
s\\7 8
=>\\9 ;
s\\< =
.\\= >
Name\\> B
==\\C E
$str\\F S
)\\S T
.\\T U
DepartmentID\\U a
}]] 
,]] 
new^^ 
Course^^ 
{^^ 
CourseID^^ $
=^^% &
$num^^' +
,^^+ ,
Title^^- 2
=^^3 4
$str^^5 C
,^^C D
Credits^^G N
=^^O P
$num^^Q R
,^^R S
DepartmentID__  
=__! "
departments__# .
.__. /
Single__/ 5
(__5 6
s__7 8
=>__9 ;
s__< =
.__= >
Name__> B
==__C E
$str__F S
)__S T
.__T U
DepartmentID__U a
}`` 
,`` 
newaa 
Courseaa 
{aa 
CourseIDaa $
=aa% &
$numaa' +
,aa+ ,
Titleaa- 2
=aa3 4
$straa5 B
,aaB C
CreditsaaG N
=aaO P
$numaaQ R
,aaR S
DepartmentIDbb  
=bb! "
departmentsbb# .
.bb. /
Singlebb/ 5
(bb5 6
sbb7 8
=>bb9 ;
sbb< =
.bb= >
Namebb> B
==bbC E
$strbbF O
)bbO P
.bbP Q
DepartmentIDbbQ ]
}cc 
,cc 
newdd 
Coursedd 
{dd 
CourseIDdd $
=dd% &
$numdd' +
,dd+ ,
Titledd- 2
=dd3 4
$strdd5 A
,ddA B
CreditsddG N
=ddO P
$numddQ R
,ddR S
DepartmentIDee  
=ee! "
departmentsee# .
.ee. /
Singleee/ 5
(ee5 6
see7 8
=>ee9 ;
see< =
.ee= >
Nameee> B
==eeC E
$streeF O
)eeO P
.eeP Q
DepartmentIDeeQ ]
}ff 
,ff 
}gg 
;gg 
foreachii 
(ii 
Courseii 
cii 
inii  
coursesii! (
)ii( )
{jj 
contextkk 
.kk 
Courseskk 
.kk  
Addkk  #
(kk# $
ckk$ %
)kk% &
;kk& '
}ll 
contextmm 
.mm 
SaveChangesmm 
(mm  
)mm  !
;mm! "
varoo 
officeAssignmentsoo !
=oo" #
newoo$ '
OfficeAssignmentoo( 8
[oo8 9
]oo9 :
{pp 
newqq 
OfficeAssignmentqq $
{qq% &
InstructorIDrr  
=rr! "
instructorsrr# .
.rr. /
Singlerr/ 5
(rr5 6
irr7 8
=>rr9 ;
irr< =
.rr= >
LastNamerr> F
==rrG I
$strrrJ T
)rrT U
.rrU V
IDrrV X
,rrX Y
Locationss 
=ss 
$strss )
}ss* +
,ss+ ,
newtt 
OfficeAssignmenttt $
{tt% &
InstructorIDuu  
=uu! "
instructorsuu# .
.uu. /
Singleuu/ 5
(uu5 6
iuu7 8
=>uu9 ;
iuu< =
.uu= >
LastNameuu> F
==uuG I
$struuJ Q
)uuQ R
.uuR S
IDuuS U
,uuU V
Locationvv 
=vv 
$strvv )
}vv* +
,vv+ ,
newww 
OfficeAssignmentww $
{ww% &
InstructorIDxx  
=xx! "
instructorsxx# .
.xx. /
Singlexx/ 5
(xx5 6
ixx7 8
=>xx9 ;
ixx< =
.xx= >
LastNamexx> F
==xxG I
$strxxJ R
)xxR S
.xxS T
IDxxT V
,xxV W
Locationyy 
=yy 
$stryy -
}yy. /
,yy/ 0
}zz 
;zz 
context|| 
.|| 
OfficeAssignments|| %
.||% &
AddRange||& .
(||. /
officeAssignments||/ @
)||@ A
;||A B
context}} 
.}} 
SaveChanges}} 
(}}  
)}}  !
;}}! "
var 
courseInstructors !
=" #
new$ '
CourseAssignment( 8
[8 9
]9 :
{
ÄÄ 
new
ÅÅ 
CourseAssignment
ÅÅ $
{
ÅÅ% &
CourseID
ÇÇ 
=
ÇÇ 
courses
ÇÇ &
.
ÇÇ& '
Single
ÇÇ' -
(
ÇÇ- .
c
ÇÇ. /
=>
ÇÇ0 2
c
ÇÇ3 4
.
ÇÇ4 5
Title
ÇÇ5 :
==
ÇÇ; =
$str
ÇÇ> I
)
ÇÇJ K
.
ÇÇK L
CourseID
ÇÇL T
,
ÇÇT U
InstructorID
ÉÉ  
=
ÉÉ! "
instructors
ÉÉ# .
.
ÉÉ. /
Single
ÉÉ/ 5
(
ÉÉ5 6
i
ÉÉ6 7
=>
ÉÉ8 :
i
ÉÉ; <
.
ÉÉ< =
LastName
ÉÉ= E
==
ÉÉF H
$str
ÉÉI Q
)
ÉÉQ R
.
ÉÉR S
ID
ÉÉS U
}
ÑÑ 
,
ÑÑ 
new
ÖÖ 
CourseAssignment
ÖÖ $
{
ÖÖ% &
CourseID
ÜÜ 
=
ÜÜ 
courses
ÜÜ &
.
ÜÜ& '
Single
ÜÜ' -
(
ÜÜ- .
c
ÜÜ. /
=>
ÜÜ0 2
c
ÜÜ3 4
.
ÜÜ4 5
Title
ÜÜ5 :
==
ÜÜ; =
$str
ÜÜ> I
)
ÜÜJ K
.
ÜÜK L
CourseID
ÜÜL T
,
ÜÜT U
InstructorID
áá  
=
áá! "
instructors
áá# .
.
áá. /
Single
áá/ 5
(
áá5 6
i
áá6 7
=>
áá8 :
i
áá; <
.
áá< =
LastName
áá= E
==
ááF H
$str
ááI P
)
ááP Q
.
ááQ R
ID
ááR T
}
àà 
,
àà 
new
ââ 
CourseAssignment
ââ $
{
ââ% &
CourseID
ää 
=
ää 
courses
ää &
.
ää& '
Single
ää' -
(
ää- .
c
ää. /
=>
ää0 2
c
ää3 4
.
ää4 5
Title
ää5 :
==
ää; =
$str
ää> N
)
ääO P
.
ääP Q
CourseID
ääQ Y
,
ääY Z
InstructorID
ãã  
=
ãã! "
instructors
ãã# .
.
ãã. /
Single
ãã/ 5
(
ãã5 6
i
ãã6 7
=>
ãã8 :
i
ãã; <
.
ãã< =
LastName
ãã= E
==
ããF H
$str
ããI P
)
ããP Q
.
ããQ R
ID
ããR T
}
åå 
,
åå 
new
çç 
CourseAssignment
çç $
{
çç% &
CourseID
éé 
=
éé 
courses
éé &
.
éé& '
Single
éé' -
(
éé- .
c
éé. /
=>
éé0 2
c
éé3 4
.
éé4 5
Title
éé5 :
==
éé; =
$str
éé> N
)
ééO P
.
ééP Q
CourseID
ééQ Y
,
ééY Z
InstructorID
èè  
=
èè! "
instructors
èè# .
.
èè. /
Single
èè/ 5
(
èè5 6
i
èè6 7
=>
èè8 :
i
èè; <
.
èè< =
LastName
èè= E
==
èèF H
$str
èèI P
)
èèP Q
.
èèQ R
ID
èèR T
}
êê 
,
êê 
new
ëë 
CourseAssignment
ëë $
{
ëë% &
CourseID
íí 
=
íí 
courses
íí &
.
íí& '
Single
íí' -
(
íí- .
c
íí. /
=>
íí0 2
c
íí3 4
.
íí4 5
Title
íí5 :
==
íí; =
$str
íí> H
)
ííI J
.
ííJ K
CourseID
ííK S
,
ííS T
InstructorID
ìì  
=
ìì! "
instructors
ìì# .
.
ìì. /
Single
ìì/ 5
(
ìì5 6
i
ìì6 7
=>
ìì8 :
i
ìì; <
.
ìì< =
LastName
ìì= E
==
ììF H
$str
ììI S
)
ììS T
.
ììT U
ID
ììU W
}
îî 
,
îî 
new
ïï 
CourseAssignment
ïï $
{
ïï% &
CourseID
ññ 
=
ññ 
courses
ññ &
.
ññ& '
Single
ññ' -
(
ññ- .
c
ññ. /
=>
ññ0 2
c
ññ3 4
.
ññ4 5
Title
ññ5 :
==
ññ; =
$str
ññ> L
)
ññM N
.
ññN O
CourseID
ññO W
,
ññW X
InstructorID
óó  
=
óó! "
instructors
óó# .
.
óó. /
Single
óó/ 5
(
óó5 6
i
óó6 7
=>
óó8 :
i
óó; <
.
óó< =
LastName
óó= E
==
óóF H
$str
óóI P
)
óóP Q
.
óóQ R
ID
óóR T
}
òò 
,
òò 
new
ôô 
CourseAssignment
ôô $
{
ôô% &
CourseID
öö 
=
öö 
courses
öö &
.
öö& '
Single
öö' -
(
öö- .
c
öö. /
=>
öö0 2
c
öö3 4
.
öö4 5
Title
öö5 :
==
öö; =
$str
öö> K
)
ööL M
.
ööM N
CourseID
ööN V
,
ööV W
InstructorID
õõ  
=
õõ! "
instructors
õõ# .
.
õõ. /
Single
õõ/ 5
(
õõ5 6
i
õõ6 7
=>
õõ8 :
i
õõ; <
.
õõ< =
LastName
õõ= E
==
õõF H
$str
õõI V
)
õõV W
.
õõW X
ID
õõX Z
}
úú 
,
úú 
new
ùù 
CourseAssignment
ùù $
{
ùù% &
CourseID
ûû 
=
ûû 
courses
ûû &
.
ûû& '
Single
ûû' -
(
ûû- .
c
ûû. /
=>
ûû0 2
c
ûû3 4
.
ûû4 5
Title
ûû5 :
==
ûû; =
$str
ûû> J
)
ûûK L
.
ûûL M
CourseID
ûûM U
,
ûûU V
InstructorID
üü  
=
üü! "
instructors
üü# .
.
üü. /
Single
üü/ 5
(
üü5 6
i
üü6 7
=>
üü8 :
i
üü; <
.
üü< =
LastName
üü= E
==
üüF H
$str
üüI V
)
üüV W
.
üüW X
ID
üüX Z
}
†† 
,
†† 
}
°° 
;
°° 
context
££ 
.
££ 
CourseAssignments
££ %
.
££% &
AddRange
££& .
(
££. /
courseInstructors
££/ @
)
££@ A
;
££A B
context
§§ 
.
§§ 
SaveChanges
§§ 
(
§§  
)
§§  !
;
§§! "
var
¶¶ 
enrollments
¶¶ 
=
¶¶ 
new
¶¶ !

Enrollment
¶¶" ,
[
¶¶, -
]
¶¶- .
{
ßß 
new
®® 

Enrollment
®® 
{
®®  
	StudentID
©© 
=
©© 
students
©©  (
.
©©( )
Single
©©) /
(
©©/ 0
s
©©0 1
=>
©©2 4
s
©©5 6
.
©©6 7
LastName
©©7 ?
==
©©@ B
$str
©©C N
)
©©N O
.
©©O P
ID
©©P R
,
©©R S
CourseID
™™ 
=
™™ 
courses
™™ &
.
™™& '
Single
™™' -
(
™™- .
c
™™. /
=>
™™0 2
c
™™3 4
.
™™4 5
Title
™™5 :
==
™™; =
$str
™™> I
)
™™J K
.
™™K L
CourseID
™™L T
,
™™T U
Grade
´´ 
=
´´ 
Grade
´´ !
.
´´! "
A
´´" #
}
¨¨ 
,
¨¨ 
new
≠≠ 

Enrollment
≠≠ "
{
≠≠# $
	StudentID
ÆÆ 
=
ÆÆ 
students
ÆÆ  (
.
ÆÆ( )
Single
ÆÆ) /
(
ÆÆ/ 0
s
ÆÆ0 1
=>
ÆÆ2 4
s
ÆÆ5 6
.
ÆÆ6 7
LastName
ÆÆ7 ?
==
ÆÆ@ B
$str
ÆÆC N
)
ÆÆN O
.
ÆÆO P
ID
ÆÆP R
,
ÆÆR S
CourseID
ØØ 
=
ØØ 
courses
ØØ &
.
ØØ& '
Single
ØØ' -
(
ØØ- .
c
ØØ. /
=>
ØØ0 2
c
ØØ3 4
.
ØØ4 5
Title
ØØ5 :
==
ØØ; =
$str
ØØ> N
)
ØØO P
.
ØØP Q
CourseID
ØØQ Y
,
ØØY Z
Grade
∞∞ 
=
∞∞ 
Grade
∞∞ !
.
∞∞! "
C
∞∞" #
}
±± 
,
±± 
new
≤≤ 

Enrollment
≤≤ "
{
≤≤# $
	StudentID
≥≥ 
=
≥≥ 
students
≥≥  (
.
≥≥( )
Single
≥≥) /
(
≥≥/ 0
s
≥≥0 1
=>
≥≥2 4
s
≥≥5 6
.
≥≥6 7
LastName
≥≥7 ?
==
≥≥@ B
$str
≥≥C N
)
≥≥N O
.
≥≥O P
ID
≥≥P R
,
≥≥R S
CourseID
¥¥ 
=
¥¥ 
courses
¥¥ &
.
¥¥& '
Single
¥¥' -
(
¥¥- .
c
¥¥. /
=>
¥¥0 2
c
¥¥3 4
.
¥¥4 5
Title
¥¥5 :
==
¥¥; =
$str
¥¥> N
)
¥¥O P
.
¥¥P Q
CourseID
¥¥Q Y
,
¥¥Y Z
Grade
µµ 
=
µµ 
Grade
µµ !
.
µµ! "
B
µµ" #
}
∂∂ 
,
∂∂ 
new
∑∑ 

Enrollment
∑∑ "
{
∑∑# $
	StudentID
∏∏ !
=
∏∏" #
students
∏∏$ ,
.
∏∏, -
Single
∏∏- 3
(
∏∏3 4
s
∏∏4 5
=>
∏∏6 8
s
∏∏9 :
.
∏∏: ;
LastName
∏∏; C
==
∏∏D F
$str
∏∏G O
)
∏∏O P
.
∏∏P Q
ID
∏∏Q S
,
∏∏S T
CourseID
ππ 
=
ππ 
courses
ππ &
.
ππ& '
Single
ππ' -
(
ππ- .
c
ππ. /
=>
ππ0 2
c
ππ3 4
.
ππ4 5
Title
ππ5 :
==
ππ; =
$str
ππ> H
)
ππI J
.
ππJ K
CourseID
ππK S
,
ππS T
Grade
∫∫ 
=
∫∫ 
Grade
∫∫ !
.
∫∫! "
B
∫∫" #
}
ªª 
,
ªª 
new
ºº 

Enrollment
ºº "
{
ºº# $
	StudentID
ΩΩ !
=
ΩΩ" #
students
ΩΩ$ ,
.
ΩΩ, -
Single
ΩΩ- 3
(
ΩΩ3 4
s
ΩΩ4 5
=>
ΩΩ6 8
s
ΩΩ9 :
.
ΩΩ: ;
LastName
ΩΩ; C
==
ΩΩD F
$str
ΩΩG O
)
ΩΩO P
.
ΩΩP Q
ID
ΩΩQ S
,
ΩΩS T
CourseID
ææ 
=
ææ 
courses
ææ &
.
ææ& '
Single
ææ' -
(
ææ- .
c
ææ. /
=>
ææ0 2
c
ææ3 4
.
ææ4 5
Title
ææ5 :
==
ææ; =
$str
ææ> L
)
ææM N
.
ææN O
CourseID
ææO W
,
ææW X
Grade
øø 
=
øø 
Grade
øø !
.
øø! "
B
øø" #
}
¿¿ 
,
¿¿ 
new
¡¡ 

Enrollment
¡¡ "
{
¡¡# $
	StudentID
¬¬ 
=
¬¬ 
students
¬¬  (
.
¬¬( )
Single
¬¬) /
(
¬¬/ 0
s
¬¬0 1
=>
¬¬2 4
s
¬¬5 6
.
¬¬6 7
LastName
¬¬7 ?
==
¬¬@ B
$str
¬¬C K
)
¬¬K L
.
¬¬L M
ID
¬¬M O
,
¬¬O P
CourseID
√√ 
=
√√ 
courses
√√ &
.
√√& '
Single
√√' -
(
√√- .
c
√√. /
=>
√√0 2
c
√√3 4
.
√√4 5
Title
√√5 :
==
√√; =
$str
√√> K
)
√√L M
.
√√M N
CourseID
√√N V
,
√√V W
Grade
ƒƒ 
=
ƒƒ 
Grade
ƒƒ !
.
ƒƒ! "
B
ƒƒ" #
}
≈≈ 
,
≈≈ 
new
∆∆ 

Enrollment
∆∆ "
{
∆∆# $
	StudentID
«« 
=
«« 
students
««  (
.
««( )
Single
««) /
(
««/ 0
s
««0 1
=>
««2 4
s
««5 6
.
««6 7
LastName
««7 ?
==
««@ B
$str
««C J
)
««J K
.
««K L
ID
««L N
,
««N O
CourseID
»» 
=
»» 
courses
»» &
.
»»& '
Single
»»' -
(
»»- .
c
»». /
=>
»»0 2
c
»»3 4
.
»»4 5
Title
»»5 :
==
»»; =
$str
»»> I
)
»»J K
.
»»K L
CourseID
»»L T
}
…… 
,
…… 
new
   

Enrollment
   "
{
  # $
	StudentID
ÀÀ 
=
ÀÀ 
students
ÀÀ  (
.
ÀÀ( )
Single
ÀÀ) /
(
ÀÀ/ 0
s
ÀÀ0 1
=>
ÀÀ2 4
s
ÀÀ5 6
.
ÀÀ6 7
LastName
ÀÀ7 ?
==
ÀÀ@ B
$str
ÀÀC J
)
ÀÀJ K
.
ÀÀK L
ID
ÀÀL N
,
ÀÀN O
CourseID
ÃÃ 
=
ÃÃ 
courses
ÃÃ &
.
ÃÃ& '
Single
ÃÃ' -
(
ÃÃ- .
c
ÃÃ. /
=>
ÃÃ0 2
c
ÃÃ3 4
.
ÃÃ4 5
Title
ÃÃ5 :
==
ÃÃ; =
$str
ÃÃ> N
)
ÃÃN O
.
ÃÃO P
CourseID
ÃÃP X
,
ÃÃX Y
Grade
ÕÕ 
=
ÕÕ 
Grade
ÕÕ !
.
ÕÕ! "
B
ÕÕ" #
}
ŒŒ 
,
ŒŒ 
new
œœ 

Enrollment
œœ 
{
œœ  
	StudentID
–– 
=
–– 
students
––  (
.
––( )
Single
––) /
(
––/ 0
s
––0 1
=>
––2 4
s
––5 6
.
––6 7
LastName
––7 ?
==
––@ B
$str
––C N
)
––N O
.
––O P
ID
––P R
,
––R S
CourseID
—— 
=
—— 
courses
—— &
.
——& '
Single
——' -
(
——- .
c
——. /
=>
——0 2
c
——3 4
.
——4 5
Title
——5 :
==
——; =
$str
——> I
)
——I J
.
——J K
CourseID
——K S
,
——S T
Grade
““ 
=
““ 
Grade
““ !
.
““! "
B
““" #
}
”” 
,
”” 
new
‘‘ 

Enrollment
‘‘ "
{
‘‘# $
	StudentID
’’ 
=
’’ 
students
’’  (
.
’’( )
Single
’’) /
(
’’/ 0
s
’’0 1
=>
’’2 4
s
’’5 6
.
’’6 7
LastName
’’7 ?
==
’’@ B
$str
’’C G
)
’’G H
.
’’H I
ID
’’I K
,
’’K L
CourseID
÷÷ 
=
÷÷ 
courses
÷÷ &
.
÷÷& '
Single
÷÷' -
(
÷÷- .
c
÷÷. /
=>
÷÷0 2
c
÷÷3 4
.
÷÷4 5
Title
÷÷5 :
==
÷÷; =
$str
÷÷> K
)
÷÷K L
.
÷÷L M
CourseID
÷÷M U
,
÷÷U V
Grade
◊◊ 
=
◊◊ 
Grade
◊◊ !
.
◊◊! "
B
◊◊" #
}
ÿÿ 
,
ÿÿ 
new
ŸŸ 

Enrollment
ŸŸ "
{
ŸŸ# $
	StudentID
⁄⁄ 
=
⁄⁄ 
students
⁄⁄  (
.
⁄⁄( )
Single
⁄⁄) /
(
⁄⁄/ 0
s
⁄⁄0 1
=>
⁄⁄2 4
s
⁄⁄5 6
.
⁄⁄6 7
LastName
⁄⁄7 ?
==
⁄⁄@ B
$str
⁄⁄C L
)
⁄⁄L M
.
⁄⁄M N
ID
⁄⁄N P
,
⁄⁄P Q
CourseID
€€ 
=
€€ 
courses
€€ &
.
€€& '
Single
€€' -
(
€€- .
c
€€. /
=>
€€0 2
c
€€3 4
.
€€4 5
Title
€€5 :
==
€€; =
$str
€€> J
)
€€J K
.
€€K L
CourseID
€€L T
,
€€T U
Grade
‹‹ 
=
‹‹ 
Grade
‹‹ !
.
‹‹! "
B
‹‹" #
}
›› 
}
ﬁﬁ 
;
ﬁﬁ 
foreach
‡‡ 
(
‡‡ 

Enrollment
‡‡ 
e
‡‡  !
in
‡‡" $
enrollments
‡‡% 0
)
‡‡0 1
{
·· 
var
‚‚ "
enrollmentInDataBase
‚‚ (
=
‚‚) *
context
‚‚+ 2
.
‚‚2 3
Enrollments
‚‚3 >
.
‚‚> ?
Where
‚‚? D
(
‚‚D E
s
„„ 
=>
„„ 
s
‰‰ 
.
‰‰ 
Student
‰‰ %
.
‰‰% &
ID
‰‰& (
==
‰‰) +
e
‰‰, -
.
‰‰- .
	StudentID
‰‰. 7
&&
‰‰8 :
s
ÂÂ 
.
ÂÂ 
Course
ÂÂ $
.
ÂÂ$ %
CourseID
ÂÂ% -
==
ÂÂ. 0
e
ÂÂ1 2
.
ÂÂ2 3
CourseID
ÂÂ3 ;
)
ÂÂ; <
.
ÂÂ< =
SingleOrDefault
ÂÂ= L
(
ÂÂL M
)
ÂÂM N
;
ÂÂN O
if
ÊÊ 
(
ÊÊ "
enrollmentInDataBase
ÊÊ (
==
ÊÊ) +
null
ÊÊ, 0
)
ÊÊ0 1
{
ÁÁ 
context
ËË 
.
ËË 
Enrollments
ËË '
.
ËË' (
Add
ËË( +
(
ËË+ ,
e
ËË, -
)
ËË- .
;
ËË. /
}
ÈÈ 
}
ÍÍ 
context
ÎÎ 
.
ÎÎ 
SaveChanges
ÎÎ 
(
ÎÎ  
)
ÎÎ  !
;
ÎÎ! "
}
ÏÏ 	
}
ÌÌ 
}ÓÓ Ä&
 /workspace/Data/SchoolContext.cs
	namespace 	
ContosoUniversity
 
. 
Data  
{ 
public 

class 
SchoolContext 
:  
	DbContext! *
{ 
public 
SchoolContext 
( 
DbContextOptions -
<- .
SchoolContext. ;
>; <
options= D
)D E
:F G
baseH L
(L M
optionsM T
)T U
{		 	
}

 	
public 
DbSet 
< 
Course 
> 
Courses $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
DbSet 
< 

Enrollment 
>  
Enrollments! ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
DbSet 
< 
Student 
> 
Students &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DbSet 
< 

Department 
>  
Departments! ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
DbSet 
< 

Instructor 
>  
Instructors! ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
DbSet 
< 
OfficeAssignment %
>% &
OfficeAssignments' 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
public 
DbSet 
< 
CourseAssignment %
>% &
CourseAssignments' 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
public 
DbSet 
< 
Person 
> 
People #
{$ %
get& )
;) *
set+ .
;. /
}0 1
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
. 
Entity 
<  
Course  &
>& '
(' (
)( )
.) *
ToTable* 1
(1 2
$str2 :
): ;
;; <
modelBuilder 
. 
Entity 
<  

Enrollment  *
>* +
(+ ,
), -
.- .
ToTable. 5
(5 6
$str6 B
)B C
;C D
modelBuilder 
. 
Entity 
<  
Student  '
>' (
(( )
)) *
.* +
ToTable+ 2
(2 3
$str3 ;
); <
;< =
modelBuilder 
. 
Entity 
<  

Department  *
>* +
(+ ,
), -
.- .
ToTable. 5
(5 6
$str6 B
)B C
;C D
modelBuilder 
. 
Entity 
<  

Instructor  *
>* +
(+ ,
), -
.- .
ToTable. 5
(5 6
$str6 >
)> ?
;? @
modelBuilder 
. 
Entity 
<  
OfficeAssignment  0
>0 1
(1 2
)2 3
.3 4
ToTable4 ;
(; <
$str< N
)N O
;O P
modelBuilder 
. 
Entity 
<  
CourseAssignment  0
>0 1
(1 2
)2 3
.3 4
ToTable4 ;
(; <
$str< N
)N O
;O P
modelBuilder 
. 
Entity 
<  
Person  &
>& '
(' (
)( )
.) *
ToTable* 1
(1 2
$str2 :
): ;
;; <
modelBuilder   
.   
Entity   
<    
CourseAssignment    0
>  0 1
(  1 2
)  2 3
.!! 
HasKey!! 
(!! 
c!! 
=>!! 
new!!  
{!!! "
c!!# $
.!!$ %
CourseID!!% -
,!!- .
c!!/ 0
.!!0 1
InstructorID!!1 =
}!!> ?
)!!? @
;!!@ A
}"" 	
}## 
}$$ ñ=
5/workspace/Migrations/20190327172701_InitialCreate.cs
	namespace 	
ContosoUniversity
 
. 

Migrations &
{ 
public 

partial 
class 
InitialCreate &
:' (
	Migration) 2
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
CourseID 
= 
table $
.$ %
Column% +
<+ ,
int, /
>/ 0
(0 1
nullable1 9
:9 :
false; @
)@ A
,A B
Title 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
nullable1 9
:9 :
true; ?
)? @
,@ A
Credits 
= 
table #
.# $
Column$ *
<* +
int+ .
>. /
(/ 0
nullable0 8
:8 9
false: ?
)? @
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 0
,0 1
x2 3
=>4 6
x7 8
.8 9
CourseID9 A
)A B
;B C
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
,  
columns 
: 
table 
=> !
new" %
{ 
ID 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
nullable+ 3
:3 4
false5 :
): ;
. 

Annotation #
(# $
$str$ G
,G H,
 SqlServerValueGenerationStrategyI i
.i j
IdentityColumnj x
)x y
,y z
LastName 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
nullable4 <
:< =
true> B
)B C
,C D
FirstMidName  
=! "
table# (
.( )
Column) /
</ 0
string0 6
>6 7
(7 8
nullable8 @
:@ A
trueB F
)F G
,G H
EnrollmentDate   "
=  # $
table  % *
.  * +
Column  + 1
<  1 2
DateTime  2 :
>  : ;
(  ; <
nullable  < D
:  D E
false  F K
)  K L
}!! 
,!! 
constraints"" 
:"" 
table"" "
=>""# %
{## 
table$$ 
.$$ 

PrimaryKey$$ $
($$$ %
$str$$% 1
,$$1 2
x$$3 4
=>$$5 7
x$$8 9
.$$9 :
ID$$: <
)$$< =
;$$= >
}%% 
)%% 
;%% 
migrationBuilder'' 
.'' 
CreateTable'' (
(''( )
name(( 
:(( 
$str(( "
,((" #
columns)) 
:)) 
table)) 
=>)) !
new))" %
{** 
EnrollmentID++  
=++! "
table++# (
.++( )
Column++) /
<++/ 0
int++0 3
>++3 4
(++4 5
nullable++5 =
:++= >
false++? D
)++D E
.,, 

Annotation,, #
(,,# $
$str,,$ G
,,,G H,
 SqlServerValueGenerationStrategy,,I i
.,,i j
IdentityColumn,,j x
),,x y
,,,y z
CourseID-- 
=-- 
table-- $
.--$ %
Column--% +
<--+ ,
int--, /
>--/ 0
(--0 1
nullable--1 9
:--9 :
false--; @
)--@ A
,--A B
	StudentID.. 
=.. 
table..  %
...% &
Column..& ,
<.., -
int..- 0
>..0 1
(..1 2
nullable..2 :
:..: ;
false..< A
)..A B
,..B C
Grade// 
=// 
table// !
.//! "
Column//" (
<//( )
int//) ,
>//, -
(//- .
nullable//. 6
://6 7
true//8 <
)//< =
}00 
,00 
constraints11 
:11 
table11 "
=>11# %
{22 
table33 
.33 

PrimaryKey33 $
(33$ %
$str33% 4
,334 5
x336 7
=>338 :
x33; <
.33< =
EnrollmentID33= I
)33I J
;33J K
table44 
.44 

ForeignKey44 $
(44$ %
name55 
:55 
$str55 =
,55= >
column66 
:66 
x66  !
=>66" $
x66% &
.66& '
CourseID66' /
,66/ 0
principalTable77 &
:77& '
$str77( 0
,770 1
principalColumn88 '
:88' (
$str88) 3
,883 4
onDelete99  
:99  !
ReferentialAction99" 3
.993 4
Cascade994 ;
)99; <
;99< =
table:: 
.:: 

ForeignKey:: $
(::$ %
name;; 
:;; 
$str;; ?
,;;? @
column<< 
:<< 
x<<  !
=><<" $
x<<% &
.<<& '
	StudentID<<' 0
,<<0 1
principalTable== &
:==& '
$str==( 1
,==1 2
principalColumn>> '
:>>' (
$str>>) -
,>>- .
onDelete??  
:??  !
ReferentialAction??" 3
.??3 4
Cascade??4 ;
)??; <
;??< =
}@@ 
)@@ 
;@@ 
migrationBuilderBB 
.BB 
CreateIndexBB (
(BB( )
nameCC 
:CC 
$strCC .
,CC. /
tableDD 
:DD 
$strDD #
,DD# $
columnEE 
:EE 
$strEE "
)EE" #
;EE# $
migrationBuilderGG 
.GG 
CreateIndexGG (
(GG( )
nameHH 
:HH 
$strHH /
,HH/ 0
tableII 
:II 
$strII #
,II# $
columnJJ 
:JJ 
$strJJ #
)JJ# $
;JJ$ %
}KK 	
	protectedMM 
overrideMM 
voidMM 
DownMM  $
(MM$ %
MigrationBuilderMM% 5
migrationBuilderMM6 F
)MMF G
{NN 	
migrationBuilderOO 
.OO 
	DropTableOO &
(OO& '
namePP 
:PP 
$strPP "
)PP" #
;PP# $
migrationBuilderRR 
.RR 
	DropTableRR &
(RR& '
nameSS 
:SS 
$strSS 
)SS 
;SS  
migrationBuilderUU 
.UU 
	DropTableUU &
(UU& '
nameVV 
:VV 
$strVV 
)VV  
;VV  !
}WW 	
}XX 
}YY ó
8/workspace/Migrations/20190327174325_MaxLengthOnNames.cs
	namespace 	
ContosoUniversity
 
. 

Migrations &
{ 
public 

partial 
class 
MaxLengthOnNames )
:* +
	Migration, 5
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
AlterColumn		 (
<		( )
string		) /
>		/ 0
(		0 1
name

 
:

 
$str

  
,

  !
table 
: 
$str  
,  !
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldNullable 
: 
true !
)! "
;" #
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str $
,$ %
table 
: 
$str  
,  !
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldNullable 
: 
true !
)! "
;" #
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str  
,  !
table 
: 
$str  
,  !
nullable 
: 
true 
, 

oldClrType   
:   
typeof   "
(  " #
string  # )
)  ) *
,  * +
oldMaxLength!! 
:!! 
$num!!  
,!!  !
oldNullable"" 
:"" 
true"" !
)""! "
;""" #
migrationBuilder$$ 
.$$ 
AlterColumn$$ (
<$$( )
string$$) /
>$$/ 0
($$0 1
name%% 
:%% 
$str%% $
,%%$ %
table&& 
:&& 
$str&&  
,&&  !
nullable'' 
:'' 
true'' 
,'' 

oldClrType(( 
:(( 
typeof(( "
(((" #
string((# )
)(() *
,((* +
oldMaxLength)) 
:)) 
$num))  
,))  !
oldNullable** 
:** 
true** !
)**! "
;**" #
}++ 	
},, 
}-- π

7/workspace/Migrations/20190327174413_ColumnFirstName.cs
	namespace 	
ContosoUniversity
 
. 

Migrations &
{ 
public 

partial 
class 
ColumnFirstName (
:) *
	Migration+ 4
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
RenameColumn		 )
(		) *
name

 
:

 
$str

 $
,

$ %
table 
: 
$str  
,  !
newName 
: 
$str $
)$ %
;% &
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
RenameColumn )
() *
name 
: 
$str !
,! "
table 
: 
$str  
,  !
newName 
: 
$str '
)' (
;( )
} 	
} 
} ñá
8/workspace/Migrations/20190327175104_ComplexDataModel.cs
	namespace 	
ContosoUniversity
 
. 

Migrations &
{ 
public 

partial 
class 
ComplexDataModel )
:* +
	Migration, 5
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str  
,  !
table 
: 
$str  
,  !
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldMaxLength 
: 
$num  
,  !
oldNullable 
: 
true !
)! "
;" #
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str !
,! "
table 
: 
$str  
,  !
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldMaxLength 
: 
$num  
,  !
oldNullable 
: 
true !
)! "
;" #
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str 
, 
table 
: 
$str 
,  
	maxLength   
:   
$num   
,   
nullable!! 
:!! 
true!! 
,!! 

oldClrType"" 
:"" 
typeof"" "
(""" #
string""# )
)"") *
,""* +
oldNullable## 
:## 
true## !
)##! "
;##" #
migrationBuilder++ 
.++ 
CreateTable++ (
(++( )
name,, 
:,, 
$str,, "
,,," #
columns-- 
:-- 
table-- 
=>-- !
new--" %
{.. 
ID// 
=// 
table// 
.// 
Column// %
<//% &
int//& )
>//) *
(//* +
nullable//+ 3
://3 4
false//5 :
)//: ;
.00 

Annotation00 #
(00# $
$str00$ G
,00G H,
 SqlServerValueGenerationStrategy00I i
.00i j
IdentityColumn00j x
)00x y
,00y z
LastName11 
=11 
table11 $
.11$ %
Column11% +
<11+ ,
string11, 2
>112 3
(113 4
	maxLength114 =
:11= >
$num11? A
,11A B
nullable11C K
:11K L
false11M R
)11R S
,11S T
	FirstName22 
=22 
table22  %
.22% &
Column22& ,
<22, -
string22- 3
>223 4
(224 5
	maxLength225 >
:22> ?
$num22@ B
,22B C
nullable22D L
:22L M
false22N S
)22S T
,22T U
HireDate33 
=33 
table33 $
.33$ %
Column33% +
<33+ ,
DateTime33, 4
>334 5
(335 6
nullable336 >
:33> ?
false33@ E
)33E F
}44 
,44 
constraints55 
:55 
table55 "
=>55# %
{66 
table77 
.77 

PrimaryKey77 $
(77$ %
$str77% 4
,774 5
x776 7
=>778 :
x77; <
.77< =
ID77= ?
)77? @
;77@ A
}88 
)88 
;88 
migrationBuilder:: 
.:: 
CreateTable:: (
(::( )
name;; 
:;; 
$str;; (
,;;( )
columns<< 
:<< 
table<< 
=><< !
new<<" %
{== 
InstructorID>>  
=>>! "
table>># (
.>>( )
Column>>) /
<>>/ 0
int>>0 3
>>>3 4
(>>4 5
nullable>>5 =
:>>= >
false>>? D
)>>D E
,>>E F
CourseID?? 
=?? 
table?? $
.??$ %
Column??% +
<??+ ,
int??, /
>??/ 0
(??0 1
nullable??1 9
:??9 :
false??; @
)??@ A
}@@ 
,@@ 
constraintsAA 
:AA 
tableAA "
=>AA# %
{BB 
tableCC 
.CC 

PrimaryKeyCC $
(CC$ %
$strCC% :
,CC: ;
xCC< =
=>CC> @
newCCA D
{CCE F
xCCG H
.CCH I
CourseIDCCI Q
,CCQ R
xCCS T
.CCT U
InstructorIDCCU a
}CCb c
)CCc d
;CCd e
tableDD 
.DD 

ForeignKeyDD $
(DD$ %
nameEE 
:EE 
$strEE C
,EEC D
columnFF 
:FF 
xFF  !
=>FF" $
xFF% &
.FF& '
CourseIDFF' /
,FF/ 0
principalTableGG &
:GG& '
$strGG( 0
,GG0 1
principalColumnHH '
:HH' (
$strHH) 3
,HH3 4
onDeleteII  
:II  !
ReferentialActionII" 3
.II3 4
CascadeII4 ;
)II; <
;II< =
tableJJ 
.JJ 

ForeignKeyJJ $
(JJ$ %
nameKK 
:KK 
$strKK K
,KKK L
columnLL 
:LL 
xLL  !
=>LL" $
xLL% &
.LL& '
InstructorIDLL' 3
,LL3 4
principalTableMM &
:MM& '
$strMM( 4
,MM4 5
principalColumnNN '
:NN' (
$strNN) -
,NN- .
onDeleteOO  
:OO  !
ReferentialActionOO" 3
.OO3 4
CascadeOO4 ;
)OO; <
;OO< =
}PP 
)PP 
;PP 
migrationBuilderRR 
.RR 
CreateTableRR (
(RR( )
nameSS 
:SS 
$strSS "
,SS" #
columnsTT 
:TT 
tableTT 
=>TT !
newTT" %
{UU 
DepartmentIDVV  
=VV! "
tableVV# (
.VV( )
ColumnVV) /
<VV/ 0
intVV0 3
>VV3 4
(VV4 5
nullableVV5 =
:VV= >
falseVV? D
)VVD E
.WW 

AnnotationWW #
(WW# $
$strWW$ G
,WWG H,
 SqlServerValueGenerationStrategyWWI i
.WWi j
IdentityColumnWWj x
)WWx y
,WWy z
NameXX 
=XX 
tableXX  
.XX  !
ColumnXX! '
<XX' (
stringXX( .
>XX. /
(XX/ 0
	maxLengthXX0 9
:XX9 :
$numXX; =
,XX= >
nullableXX? G
:XXG H
trueXXI M
)XXM N
,XXN O
BudgetYY 
=YY 
tableYY "
.YY" #
ColumnYY# )
<YY) *
decimalYY* 1
>YY1 2
(YY2 3
typeYY3 7
:YY7 8
$strYY9 @
,YY@ A
nullableYYB J
:YYJ K
falseYYL Q
)YYQ R
,YYR S
	StartDateZZ 
=ZZ 
tableZZ  %
.ZZ% &
ColumnZZ& ,
<ZZ, -
DateTimeZZ- 5
>ZZ5 6
(ZZ6 7
nullableZZ7 ?
:ZZ? @
falseZZA F
)ZZF G
,ZZG H
InstructorID[[  
=[[! "
table[[# (
.[[( )
Column[[) /
<[[/ 0
int[[0 3
>[[3 4
([[4 5
nullable[[5 =
:[[= >
true[[? C
)[[C D
}\\ 
,\\ 
constraints]] 
:]] 
table]] "
=>]]# %
{^^ 
table__ 
.__ 

PrimaryKey__ $
(__$ %
$str__% 4
,__4 5
x__6 7
=>__8 :
x__; <
.__< =
DepartmentID__= I
)__I J
;__J K
table`` 
.`` 

ForeignKey`` $
(``$ %
nameaa 
:aa 
$straa E
,aaE F
columnbb 
:bb 
xbb  !
=>bb" $
xbb% &
.bb& '
InstructorIDbb' 3
,bb3 4
principalTablecc &
:cc& '
$strcc( 4
,cc4 5
principalColumndd '
:dd' (
$strdd) -
,dd- .
onDeleteee  
:ee  !
ReferentialActionee" 3
.ee3 4
Restrictee4 <
)ee< =
;ee= >
}ff 
)ff 
;ff 
migrationBuilderhh 
.hh 
Sqlhh  
(hh  !
$strhh! x
)hhx y
;hhy z
migrationBuilderll 
.ll 
	AddColumnll &
<ll& '
intll' *
>ll* +
(ll+ ,
namemm 
:mm 
$strmm $
,mm$ %
tablenn 
:nn 
$strnn 
,nn  
nullableoo 
:oo 
falseoo 
,oo  
defaultValuepp 
:pp 
$numpp 
)pp  
;pp  !
migrationBuilderrr 
.rr 
CreateTablerr (
(rr( )
namess 
:ss 
$strss (
,ss( )
columnstt 
:tt 
tablett 
=>tt !
newtt" %
{uu 
InstructorIDvv  
=vv! "
tablevv# (
.vv( )
Columnvv) /
<vv/ 0
intvv0 3
>vv3 4
(vv4 5
nullablevv5 =
:vv= >
falsevv? D
)vvD E
,vvE F
Locationww 
=ww 
tableww $
.ww$ %
Columnww% +
<ww+ ,
stringww, 2
>ww2 3
(ww3 4
	maxLengthww4 =
:ww= >
$numww? A
,wwA B
nullablewwC K
:wwK L
truewwM Q
)wwQ R
}xx 
,xx 
constraintsyy 
:yy 
tableyy "
=>yy# %
{zz 
table{{ 
.{{ 

PrimaryKey{{ $
({{$ %
$str{{% :
,{{: ;
x{{< =
=>{{> @
x{{A B
.{{B C
InstructorID{{C O
){{O P
;{{P Q
table|| 
.|| 

ForeignKey|| $
(||$ %
name}} 
:}} 
$str}} K
,}}K L
column~~ 
:~~ 
x~~  !
=>~~" $
x~~% &
.~~& '
InstructorID~~' 3
,~~3 4
principalTable &
:& '
$str( 4
,4 5
principalColumn
ÄÄ '
:
ÄÄ' (
$str
ÄÄ) -
,
ÄÄ- .
onDelete
ÅÅ  
:
ÅÅ  !
ReferentialAction
ÅÅ" 3
.
ÅÅ3 4
Cascade
ÅÅ4 ;
)
ÅÅ; <
;
ÅÅ< =
}
ÇÇ 
)
ÇÇ 
;
ÇÇ 
migrationBuilder
ÑÑ 
.
ÑÑ 
CreateIndex
ÑÑ (
(
ÑÑ( )
name
ÖÖ 
:
ÖÖ 
$str
ÖÖ .
,
ÖÖ. /
table
ÜÜ 
:
ÜÜ 
$str
ÜÜ 
,
ÜÜ  
column
áá 
:
áá 
$str
áá &
)
áá& '
;
áá' (
migrationBuilder
ââ 
.
ââ 
CreateIndex
ââ (
(
ââ( )
name
ää 
:
ää 
$str
ää 8
,
ää8 9
table
ãã 
:
ãã 
$str
ãã )
,
ãã) *
column
åå 
:
åå 
$str
åå &
)
åå& '
;
åå' (
migrationBuilder
éé 
.
éé 
CreateIndex
éé (
(
éé( )
name
èè 
:
èè 
$str
èè 2
,
èè2 3
table
êê 
:
êê 
$str
êê #
,
êê# $
column
ëë 
:
ëë 
$str
ëë &
)
ëë& '
;
ëë' (
migrationBuilder
ìì 
.
ìì 
AddForeignKey
ìì *
(
ìì* +
name
îî 
:
îî 
$str
îî 9
,
îî9 :
table
ïï 
:
ïï 
$str
ïï 
,
ïï  
column
ññ 
:
ññ 
$str
ññ &
,
ññ& '
principalTable
óó 
:
óó 
$str
óó  ,
,
óó, -
principalColumn
òò 
:
òò  
$str
òò! /
,
òò/ 0
onDelete
ôô 
:
ôô 
ReferentialAction
ôô +
.
ôô+ ,
Cascade
ôô, 3
)
ôô3 4
;
ôô4 5
}
öö 	
	protected
úú 
override
úú 
void
úú 
Down
úú  $
(
úú$ %
MigrationBuilder
úú% 5
migrationBuilder
úú6 F
)
úúF G
{
ùù 	
migrationBuilder
ûû 
.
ûû 
DropForeignKey
ûû +
(
ûû+ ,
name
üü 
:
üü 
$str
üü 9
,
üü9 :
table
†† 
:
†† 
$str
†† 
)
††  
;
††  !
migrationBuilder
¢¢ 
.
¢¢ 
	DropTable
¢¢ &
(
¢¢& '
name
££ 
:
££ 
$str
££ (
)
££( )
;
££) *
migrationBuilder
•• 
.
•• 
	DropTable
•• &
(
••& '
name
¶¶ 
:
¶¶ 
$str
¶¶ "
)
¶¶" #
;
¶¶# $
migrationBuilder
®® 
.
®® 
	DropTable
®® &
(
®®& '
name
©© 
:
©© 
$str
©© (
)
©©( )
;
©©) *
migrationBuilder
´´ 
.
´´ 
	DropTable
´´ &
(
´´& '
name
¨¨ 
:
¨¨ 
$str
¨¨ "
)
¨¨" #
;
¨¨# $
migrationBuilder
ÆÆ 
.
ÆÆ 
	DropIndex
ÆÆ &
(
ÆÆ& '
name
ØØ 
:
ØØ 
$str
ØØ .
,
ØØ. /
table
∞∞ 
:
∞∞ 
$str
∞∞ 
)
∞∞  
;
∞∞  !
migrationBuilder
≤≤ 
.
≤≤ 

DropColumn
≤≤ '
(
≤≤' (
name
≥≥ 
:
≥≥ 
$str
≥≥ $
,
≥≥$ %
table
¥¥ 
:
¥¥ 
$str
¥¥ 
)
¥¥  
;
¥¥  !
migrationBuilder
∂∂ 
.
∂∂ 
AlterColumn
∂∂ (
<
∂∂( )
string
∂∂) /
>
∂∂/ 0
(
∂∂0 1
name
∑∑ 
:
∑∑ 
$str
∑∑  
,
∑∑  !
table
∏∏ 
:
∏∏ 
$str
∏∏  
,
∏∏  !
	maxLength
ππ 
:
ππ 
$num
ππ 
,
ππ 
nullable
∫∫ 
:
∫∫ 
true
∫∫ 
,
∫∫ 

oldClrType
ªª 
:
ªª 
typeof
ªª "
(
ªª" #
string
ªª# )
)
ªª) *
,
ªª* +
oldMaxLength
ºº 
:
ºº 
$num
ºº  
)
ºº  !
;
ºº! "
migrationBuilder
ææ 
.
ææ 
AlterColumn
ææ (
<
ææ( )
string
ææ) /
>
ææ/ 0
(
ææ0 1
name
øø 
:
øø 
$str
øø !
,
øø! "
table
¿¿ 
:
¿¿ 
$str
¿¿  
,
¿¿  !
	maxLength
¡¡ 
:
¡¡ 
$num
¡¡ 
,
¡¡ 
nullable
¬¬ 
:
¬¬ 
true
¬¬ 
,
¬¬ 

oldClrType
√√ 
:
√√ 
typeof
√√ "
(
√√" #
string
√√# )
)
√√) *
,
√√* +
oldMaxLength
ƒƒ 
:
ƒƒ 
$num
ƒƒ  
)
ƒƒ  !
;
ƒƒ! "
migrationBuilder
∆∆ 
.
∆∆ 
AlterColumn
∆∆ (
<
∆∆( )
string
∆∆) /
>
∆∆/ 0
(
∆∆0 1
name
«« 
:
«« 
$str
«« 
,
«« 
table
»» 
:
»» 
$str
»» 
,
»»  
nullable
…… 
:
…… 
true
…… 
,
…… 

oldClrType
   
:
   
typeof
   "
(
  " #
string
  # )
)
  ) *
,
  * +
oldMaxLength
ÀÀ 
:
ÀÀ 
$num
ÀÀ  
,
ÀÀ  !
oldNullable
ÃÃ 
:
ÃÃ 
true
ÃÃ !
)
ÃÃ! "
;
ÃÃ" #
}
ÕÕ 	
}
ŒŒ 
}œœ ¸

2/workspace/Migrations/20190327200445_RowVersion.cs
	namespace 	
ContosoUniversity
 
. 

Migrations &
{ 
public 

partial 
class 

RowVersion #
:$ %
	Migration& /
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{		 	
migrationBuilder

 
.

 
	AddColumn

 &
<

& '
byte

' +
[

+ ,
]

, -
>

- .
(

. /
name 
: 
$str "
," #
table 
: 
$str #
,# $

rowVersion 
: 
true  
,  !
nullable 
: 
true 
) 
;  
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str "
," #
table 
: 
$str #
)# $
;$ %
} 	
} 
} ∑Z
3/workspace/Migrations/20190327203249_Inheritance.cs
	namespace 	
ContosoUniversity
 
. 

Migrations &
{ 
public 

partial 
class 
Inheritance $
:% &
	Migration' 0
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
migrationBuilder 
. 
DropForeignKey +
(+ ,
name 
: 
$str 7
,7 8
table 
: 
$str #
)# $
;$ %
migrationBuilder 
. 
	DropIndex &
(& '
name' +
:+ ,
$str- F
,F G
tableH M
:M N
$strO [
)[ \
;\ ]
migrationBuilder 
. 
RenameTable (
(( )
name) -
:- .
$str/ ;
,; <
newName= D
:D E
$strF N
)N O
;O P
migrationBuilder 
. 
	AddColumn &
<& '
DateTime' /
>/ 0
(0 1
name1 5
:5 6
$str7 G
,G H
tableI N
:N O
$strP X
,X Y
nullableZ b
:b c
trued h
)h i
;i j
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name/ 3
:3 4
$str5 D
,D E
tableF K
:K L
$strM U
,U V
nullableW _
:_ `
falsea f
,f g
	maxLengthh q
:q r
$nums v
,v w
defaultValue	x Ñ
:
Ñ Ö
$str
Ü í
)
í ì
;
ì î
migrationBuilder 
. 
AlterColumn (
<( )
DateTime) 1
>1 2
(2 3
name3 7
:7 8
$str9 C
,C D
tableE J
:J K
$strL T
,T U
nullableV ^
:^ _
true` d
)d e
;e f
migrationBuilder 
. 
	AddColumn &
<& '
int' *
>* +
(+ ,
name, 0
:0 1
$str2 9
,9 :
table; @
:@ A
$strB J
,J K
nullableL T
:T U
trueV Z
)Z [
;[ \
migrationBuilder 
. 
Sql  
(  !
$str	! ˆ
)
ˆ ˜
;
˜ ¯
migrationBuilder 
. 
Sql  
(  !
$str	! •
)
• ¶
;
¶ ß
migrationBuilder 
. 

DropColumn '
(' (
name( ,
:, -
$str. 5
,5 6
table7 <
:< =
$str> F
)F G
;G H
migrationBuilder 
. 
	DropTable &
(& '
name   
:   
$str   
)    
;    !
migrationBuilder"" 
."" 
CreateIndex"" (
(""( )
name## 
:## 
$str## 0
,##0 1
table$$ 
:$$ 
$str$$ $
,$$$ %
column%% 
:%% 
$str%% $
)%%$ %
;%%% &
migrationBuilder'' 
.'' 
AddForeignKey'' *
(''* +
name(( 
:(( 
$str(( 6
,((6 7
table)) 
:)) 
$str)) #
,))# $
column** 
:** 
$str** #
,**# $
principalTable++ 
:++ 
$str++  (
,++( )
principalColumn,, 
:,,  
$str,,! %
,,,% &
onDelete-- 
:-- 
ReferentialAction-- +
.--+ ,
Cascade--, 3
)--3 4
;--4 5
}.. 	
	protected00 
override00 
void00 
Down00  $
(00$ %
MigrationBuilder00% 5
migrationBuilder006 F
)00F G
{11 	
migrationBuilder22 
.22 
DropForeignKey22 +
(22+ ,
name33 
:33 
$str33 ?
,33? @
table44 
:44 
$str44 )
)44) *
;44* +
migrationBuilder66 
.66 
DropForeignKey66 +
(66+ ,
name77 
:77 
$str77 9
,779 :
table88 
:88 
$str88 #
)88# $
;88$ %
migrationBuilder:: 
.:: 
DropForeignKey:: +
(::+ ,
name;; 
:;; 
$str;; 6
,;;6 7
table<< 
:<< 
$str<< #
)<<# $
;<<$ %
migrationBuilder>> 
.>> 
DropForeignKey>> +
(>>+ ,
name?? 
:?? 
$str?? ?
,??? @
table@@ 
:@@ 
$str@@ )
)@@) *
;@@* +
migrationBuilderBB 
.BB 
DropPrimaryKeyBB +
(BB+ ,
nameCC 
:CC 
$strCC !
,CC! "
tableDD 
:DD 
$strDD 
)DD  
;DD  !
migrationBuilderFF 
.FF 

DropColumnFF '
(FF' (
nameGG 
:GG 
$strGG  
,GG  !
tableHH 
:HH 
$strHH 
)HH  
;HH  !
migrationBuilderJJ 
.JJ 

DropColumnJJ '
(JJ' (
nameKK 
:KK 
$strKK %
,KK% &
tableLL 
:LL 
$strLL 
)LL  
;LL  !
migrationBuilderNN 
.NN 
RenameTableNN (
(NN( )
nameOO 
:OO 
$strOO 
,OO 
newNamePP 
:PP 
$strPP "
)PP" #
;PP# $
migrationBuilderRR 
.RR 
AlterColumnRR (
<RR( )
DateTimeRR) 1
>RR1 2
(RR2 3
nameSS 
:SS 
$strSS &
,SS& '
tableTT 
:TT 
$strTT  
,TT  !
nullableUU 
:UU 
falseUU 
,UU  

oldClrTypeVV 
:VV 
typeofVV "
(VV" #
DateTimeVV# +
)VV+ ,
,VV, -
oldNullableWW 
:WW 
trueWW !
)WW! "
;WW" #
migrationBuilderYY 
.YY 
AddPrimaryKeyYY *
(YY* +
nameZZ 
:ZZ 
$strZZ "
,ZZ" #
table[[ 
:[[ 
$str[[  
,[[  !
column\\ 
:\\ 
$str\\ 
)\\ 
;\\ 
migrationBuilder^^ 
.^^ 
CreateTable^^ (
(^^( )
name__ 
:__ 
$str__ "
,__" #
columns`` 
:`` 
table`` 
=>`` !
new``" %
{aa 
IDbb 
=bb 
tablebb 
.bb 
Columnbb %
<bb% &
intbb& )
>bb) *
(bb* +
nullablebb+ 3
:bb3 4
falsebb5 :
)bb: ;
.cc 

Annotationcc #
(cc# $
$strcc$ G
,ccG H,
 SqlServerValueGenerationStrategyccI i
.cci j
IdentityColumnccj x
)ccx y
,ccy z
	FirstNamedd 
=dd 
tabledd  %
.dd% &
Columndd& ,
<dd, -
stringdd- 3
>dd3 4
(dd4 5
	maxLengthdd5 >
:dd> ?
$numdd@ B
,ddB C
nullableddD L
:ddL M
falseddN S
)ddS T
,ddT U
HireDateee 
=ee 
tableee $
.ee$ %
Columnee% +
<ee+ ,
DateTimeee, 4
>ee4 5
(ee5 6
nullableee6 >
:ee> ?
falseee@ E
)eeE F
,eeF G
LastNameff 
=ff 
tableff $
.ff$ %
Columnff% +
<ff+ ,
stringff, 2
>ff2 3
(ff3 4
	maxLengthff4 =
:ff= >
$numff? A
,ffA B
nullableffC K
:ffK L
falseffM R
)ffR S
}gg 
,gg 
constraintshh 
:hh 
tablehh "
=>hh# %
{ii 
tablejj 
.jj 

PrimaryKeyjj $
(jj$ %
$strjj% 4
,jj4 5
xjj6 7
=>jj8 :
xjj; <
.jj< =
IDjj= ?
)jj? @
;jj@ A
}kk 
)kk 
;kk 
migrationBuildermm 
.mm 
AddForeignKeymm *
(mm* +
namenn 
:nn 
$strnn C
,nnC D
tableoo 
:oo 
$stroo )
,oo) *
columnpp 
:pp 
$strpp &
,pp& '
principalTableqq 
:qq 
$strqq  ,
,qq, -
principalColumnrr 
:rr  
$strrr! %
,rr% &
onDeletess 
:ss 
ReferentialActionss +
.ss+ ,
Cascadess, 3
)ss3 4
;ss4 5
migrationBuilderuu 
.uu 
AddForeignKeyuu *
(uu* +
namevv 
:vv 
$strvv =
,vv= >
tableww 
:ww 
$strww #
,ww# $
columnxx 
:xx 
$strxx &
,xx& '
principalTableyy 
:yy 
$stryy  ,
,yy, -
principalColumnzz 
:zz  
$strzz! %
,zz% &
onDelete{{ 
:{{ 
ReferentialAction{{ +
.{{+ ,
Restrict{{, 4
){{4 5
;{{5 6
migrationBuilder}} 
.}} 
AddForeignKey}} *
(}}* +
name~~ 
:~~ 
$str~~ 7
,~~7 8
table 
: 
$str #
,# $
column
ÄÄ 
:
ÄÄ 
$str
ÄÄ #
,
ÄÄ# $
principalTable
ÅÅ 
:
ÅÅ 
$str
ÅÅ  )
,
ÅÅ) *
principalColumn
ÇÇ 
:
ÇÇ  
$str
ÇÇ! %
,
ÇÇ% &
onDelete
ÉÉ 
:
ÉÉ 
ReferentialAction
ÉÉ +
.
ÉÉ+ ,
Cascade
ÉÉ, 3
)
ÉÉ3 4
;
ÉÉ4 5
migrationBuilder
ÖÖ 
.
ÖÖ 
AddForeignKey
ÖÖ *
(
ÖÖ* +
name
ÜÜ 
:
ÜÜ 
$str
ÜÜ C
,
ÜÜC D
table
áá 
:
áá 
$str
áá )
,
áá) *
column
àà 
:
àà 
$str
àà &
,
àà& '
principalTable
ââ 
:
ââ 
$str
ââ  ,
,
ââ, -
principalColumn
ää 
:
ää  
$str
ää! %
,
ää% &
onDelete
ãã 
:
ãã 
ReferentialAction
ãã +
.
ãã+ ,
Cascade
ãã, 3
)
ãã3 4
;
ãã4 5
}
åå 	
}
çç 
}éé ä
/workspace/Models/Course.cs
	namespace 	
ContosoUniversity
 
. 
Models "
{ 
public 

class 
Course 
{ 
[		 	
DatabaseGenerated			 
(		 #
DatabaseGeneratedOption		 2
.		2 3
None		3 7
)		7 8
]		8 9
[

 	
Display

	 
(

 
Name

 
=

 
$str

  
)

  !
]

! "
public 
int 
CourseID 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
StringLength	 
( 
$num 
, 
MinimumLength '
=( )
$num* +
)+ ,
], -
public 
string 
Title 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Range	 
( 
$num 
, 
$num 
) 
] 
public 
int 
Credits 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
DepartmentID 
{  !
get" %
;% &
set' *
;* +
}, -
public 

Department 

Department $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
ICollection 
< 

Enrollment %
>% &
Enrollments' 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public 
ICollection 
< 
CourseAssignment +
>+ ,
CourseAssignments- >
{? @
getA D
;D E
setF I
;I J
}K L
} 
} Ì
%/workspace/Models/CourseAssignment.cs
	namespace 	
ContosoUniversity
 
. 
Models "
{ 
public 

class 
CourseAssignment !
{		 
public

 
int

 
InstructorID

 
{

  !
get

" %
;

% &
set

' *
;

* +
}

, -
public 
int 
CourseID 
{ 
get !
;! "
set# &
;& '
}( )
public 

Instructor 

Instructor $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
Course 
Course 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} ≠
/workspace/Models/Department.cs
	namespace 	
ContosoUniversity
 
. 
Models "
{ 
public 

class 

Department 
{		 
public

 
int

 
DepartmentID

 
{

  !
get

" %
;

% &
set

' *
;

* +
}

, -
[ 	
StringLength	 
( 
$num 
, 
MinimumLength '
=( )
$num* +
)+ ,
], -
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
[ 	
DataType	 
( 
DataType 
. 
Currency #
)# $
]$ %
[ 	
Column	 
( 
TypeName 
= 
$str "
)" #
]# $
public 
decimal 
Budget 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	
DataType	 
( 
DataType 
. 
Date 
)  
]  !
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* :
,: ;!
ApplyFormatInEditMode< Q
=R S
trueT X
)X Y
]Y Z
[ 	
Display	 
( 
Name 
= 
$str $
)$ %
]% &
public 
DateTime 
	StartDate !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
? 
InstructorID  
{! "
get# &
;& '
set( +
;+ ,
}- .
[ 	
	Timestamp	 
] 
public 
byte 
[ 
] 

RowVersion  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 

Instructor 
Administrator '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
ICollection 
< 
Course !
>! "
Courses# *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
} 
}   è
/workspace/Models/Enrollment.cs
	namespace 	
ContosoUniversity
 
. 
Models "
{ 
public 

enum 
Grade 
{ 
A 	
,	 

B 
, 
C 
, 
D 
, 
F 
}		 
public 

class 

Enrollment 
{ 
public 
int 
EnrollmentID 
{  !
get" %
;% &
set' *
;* +
}, -
public 
int 
CourseID 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
	StudentID 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	
DisplayFormat	 
( 
NullDisplayText &
=' (
$str) 3
)3 4
]4 5
public 
Grade 
? 
Grade 
{ 
get !
;! "
set# &
;& '
}( )
public 
Course 
Course 
{ 
get "
;" #
set$ '
;' (
}) *
public 
Student 
Student 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ˆ
#/workspace/Models/ErrorViewModel.cs
	namespace 	
ContosoUniversity
 
. 
Models "
{ 
public 

class 
ErrorViewModel 
{ 
public 
string 
	RequestId 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
bool		 
ShowRequestId		 !
=>		" $
!		% &
string		& ,
.		, -
IsNullOrEmpty		- :
(		: ;
	RequestId		; D
)		D E
;		E F
}

 
} ∫

/workspace/Models/Instructor.cs
	namespace 	
ContosoUniversity
 
. 
Models "
{ 
public 

class 

Instructor 
: 
Person $
{		 
[

 	
DataType

	 
(

 
DataType

 
.

 
Date

 
)

  
]

  !
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* :
,: ;!
ApplyFormatInEditMode< Q
=R S
trueT X
)X Y
]Y Z
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public 
DateTime 
HireDate  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
ICollection 
< 
CourseAssignment +
>+ ,
CourseAssignments- >
{? @
getA D
;D E
setF I
;I J
}K L
public 
OfficeAssignment 
OfficeAssignment  0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
} 
} Ò
%/workspace/Models/OfficeAssignment.cs
	namespace 	
ContosoUniversity
 
. 
Models "
{ 
public 

class 
OfficeAssignment !
{ 
[ 	
Key	 
] 
public		 
int		 
InstructorID		 
{		  !
get		" %
;		% &
set		' *
;		* +
}		, -
[

 	
StringLength

	 
(

 
$num

 
)

 
]

 
[ 	
Display	 
( 
Name 
= 
$str )
)) *
]* +
public 
string 
Location 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

Instructor 

Instructor $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
}  
/workspace/Models/Person.cs
	namespace 	
ContosoUniversity
 
. 
Models "
{ 
public 

abstract 
class 
Person  
{ 
public 
int 
ID 
{ 
get 
; 
set  
;  !
}" #
[

 	
Required

	 
]

 
[ 	
StringLength	 
( 
$num 
) 
] 
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
, 
ErrorMessage &
=' (
$str) Z
)Z [
][ \
[ 	
Column	 
( 
$str 
) 
] 
[ 	
Display	 
( 
Name 
= 
$str $
)$ %
]% &
public 
string 
FirstMidName "
{# $
get% (
;( )
set* -
;- .
}/ 0
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public 
string 
FullName 
{ 	
get 
{ 
return 
LastName 
+  !
$str" &
+' (
FirstMidName) 5
;5 6
} 
} 	
} 
} â
8/workspace/Models/SchoolViewModels/AssignedCourseData.cs
	namespace 	
ContosoUniversity
 
. 
Models "
." #
SchoolViewModels# 3
{ 
public 

class 
AssignedCourseData #
{		 
public

 
int

 
CourseID

 
{

 
get

 !
;

! "
set

# &
;

& '
}

( )
public 
string 
Title 
{ 
get !
;! "
set# &
;& '
}( )
public 
bool 
Assigned 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} ò
9/workspace/Models/SchoolViewModels/EnrollmentDateGroup.cs
	namespace 	
ContosoUniversity
 
. 
Models "
." #
SchoolViewModels# 3
{ 
public 

class 
EnrollmentDateGroup $
{ 
[ 	
DataType	 
( 
DataType 
. 
Date 
)  
]  !
public		 
DateTime		 
?		 
EnrollmentDate		 '
{		( )
get		* -
;		- .
set		/ 2
;		2 3
}		4 5
public 
int 
StudentCount 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} ≈
9/workspace/Models/SchoolViewModels/InstructorIndexData.cs
	namespace 	
ContosoUniversity
 
. 
Models "
." #
SchoolViewModels# 3
{ 
public 

class 
InstructorIndexData $
{		 
public

 
IEnumerable

 
<

 

Instructor

 %
>

% &
Instructors

' 2
{

3 4
get

5 8
;

8 9
set

: =
;

= >
}

? @
public 
IEnumerable 
< 
Course !
>! "
Courses# *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
IEnumerable 
< 

Enrollment %
>% &
Enrollments' 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
} 
} Ä	
/workspace/Models/Student.cs
	namespace 	
ContosoUniversity
 
. 
Models "
{ 
public 

class 
Student 
: 
Person !
{		 
[

 	
DataType

	 
(

 
DataType

 
.

 
Date

 
)

  
]

  !
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* :
,: ;!
ApplyFormatInEditMode< Q
=R S
trueT X
)X Y
]Y Z
[ 	
Display	 
( 
Name 
= 
$str )
)) *
]* +
public 
DateTime 
EnrollmentDate &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
ICollection 
< 

Enrollment %
>% &
Enrollments' 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
} 
} Ú
/workspace/PaginatedList.cs
	namespace 	
ContosoUniversity
 
{ 
public		 

class		 
PaginatedList		 
<		 
T		  
>		  !
:		" #
List		$ (
<		( )
T		) *
>		* +
{

 
public 
int 
	PageIndex 
{ 
get "
;" #
private$ +
set, /
;/ 0
}1 2
public 
int 

TotalPages 
{ 
get  #
;# $
private% ,
set- 0
;0 1
}2 3
public 
PaginatedList 
( 
List !
<! "
T" #
># $
items% *
,* +
int, /
count0 5
,5 6
int7 :
	pageIndex; D
,D E
intF I
pageSizeJ R
)R S
{ 	
	PageIndex 
= 
	pageIndex !
;! "

TotalPages 
= 
( 
int 
) 
Math "
." #
Ceiling# *
(* +
count+ 0
/1 2
(3 4
double4 :
): ;
pageSize; C
)C D
;D E
this 
. 
AddRange 
( 
items 
)  
;  !
} 	
public 
bool 
HasPreviousPage #
=>$ &
	PageIndex' 0
>1 2
$num3 4
;4 5
public 
bool 
HasNextPage 
=>  "
	PageIndex# ,
<- .

TotalPages/ 9
;9 :
public 
static 
async 
Task  
<  !
PaginatedList! .
<. /
T/ 0
>0 1
>1 2
CreateAsync3 >
(> ?

IQueryable? I
<I J
TJ K
>K L
sourceM S
,S T
intU X
	pageIndexY b
,b c
intd g
pageSizeh p
)p q
{ 	
var 
count 
= 
await 
source $
.$ %

CountAsync% /
(/ 0
)0 1
;1 2
var 
items 
= 
await 
source $
.$ %
Skip% )
() *
(* +
	pageIndex+ 4
-5 6
$num7 8
)8 9
*: ;
pageSize< D
)D E
.E F
TakeF J
(J K
pageSizeK S
)S T
.T U
ToListAsyncU `
(` a
)a b
;b c
return 
new 
PaginatedList $
<$ %
T% &
>& '
(' (
items( -
,- .
count/ 4
,4 5
	pageIndex6 ?
,? @
pageSizeA I
)I J
;J K
} 	
}   
}!! ¬
/workspace/Program.cs
	namespace 	
ContosoUniversity
 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
var 
host 
=  
CreateWebHostBuilder +
(+ ,
args, 0
)0 1
.1 2
Build2 7
(7 8
)8 9
;9 :
using 
( 
var 
scope 
= 
host #
.# $
Services$ ,
., -
CreateScope- 8
(8 9
)9 :
): ;
{ 
var 
services 
= 
scope $
.$ %
ServiceProvider% 4
;4 5
try 
{ 
var 
context 
=  !
services" *
.* +
GetRequiredService+ =
<= >
SchoolContext> K
>K L
(L M
)M N
;N O
DbInitializer !
.! "

Initialize" ,
(, -
context- 4
)4 5
;5 6
} 
catch 
( 
	Exception  
ex! #
)# $
{ 
var 
logger 
=  
services! )
.) *
GetRequiredService* <
<< =
ILogger= D
<D E
ProgramE L
>L M
>M N
(N O
)O P
;P Q
logger   
.   
LogError   #
(  # $
ex  $ &
,  & '
$str  ( W
)  W X
;  X Y
}!! 
}"" 
host$$ 
.$$ 
Run$$ 
($$ 
)$$ 
;$$ 
}%% 	
public'' 
static'' 
IWebHostBuilder'' % 
CreateWebHostBuilder''& :
('': ;
string''; A
[''A B
]''B C
args''D H
)''H I
=>''J L
WebHost(( 
.((  
CreateDefaultBuilder(( (
(((( )
args(() -
)((- .
.)) 

UseStartup)) 
<)) 
Startup)) #
>))# $
())$ %
)))% &
;))& '
}** 
}++ —
/workspace/Startup.cs
	namespace 	
ContosoUniversity
 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{		 	
Configuration

 
=

 
configuration

 )
;

) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. 
	Configure 
< 
CookiePolicyOptions 2
>2 3
(3 4
options4 ;
=>< >
{ 
options 
. 
CheckConsentNeeded *
=+ ,
context- 4
=>5 7
true8 <
;< =
options 
. !
MinimumSameSitePolicy -
=. /
SameSiteMode0 <
.< =
None= A
;A B
} 
) 
; 
services 
. 
AddDbContext !
<! "
SchoolContext" /
>/ 0
(0 1
options1 8
=>9 ;
{ 
options 
. 
UseSqlServer $
($ %
Configuration% 2
.2 3
GetConnectionString3 F
(F G
$strG Z
)Z [
)[ \
;\ ]
} 
) 
; 
services 
. 
AddMvc 
( 
opt 
=>  "
{ 
opt   
.   !
EnableEndpointRouting   )
=  * +
false  , 1
;  1 2
}!! 
)!! 
;!! 
}"" 	
public%% 
void%% 
	Configure%% 
(%% 
IApplicationBuilder%% 1
app%%2 5
,%%5 6
IHostEnvironment%%7 G
env%%H K
)%%K L
{&& 	
if'' 
('' 
env'' 
.'' 
IsDevelopment'' !
(''! "
)''" #
)''# $
{(( 
app)) 
.)) %
UseDeveloperExceptionPage)) -
())- .
))). /
;))/ 0
}** 
else++ 
{,, 
app-- 
.-- 
UseExceptionHandler-- '
(--' (
$str--( 5
)--5 6
;--6 7
app// 
.// 
UseHsts// 
(// 
)// 
;// 
}00 
app22 
.22 
UseHttpsRedirection22 #
(22# $
)22$ %
;22% &
app33 
.33 
UseStaticFiles33 
(33 
)33  
;33  !
app44 
.44 
UseCookiePolicy44 
(44  
)44  !
;44! "
app66 
.66 
UseMvc66 
(66 
routes66 
=>66  
{77 
routes88 
.88 
MapRoute88 
(88  
name99 
:99 
$str99 #
,99# $
template:: 
::: 
$str:: F
)::F G
;::G H
};; 
);; 
;;; 
}<< 	
}== 
}>> 